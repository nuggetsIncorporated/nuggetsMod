######################################
### Revamped USA MIOs by Deliberus ###
######################################

##################
### Armor MIOs ###
##################

USA_american_car_and_foundry_organisation = { #American Car and Foundry
	name = USA_american_car_and_foundry
	icon = GFX_idea_USA_american_car_and_foundry

	allowed = { is_american_tag = yes }
	available = {
		360 = { is_owned_and_controlled_by = FROM } #Philadelphia
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_fast_tanks_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1
		name = american_car_and_foundry_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_light_tank_division

		available = { 360 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { american_car_and_foundry_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { american_car_and_foundry_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[360.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[360.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { american_car_and_foundry_stockpile_trait_unlocked = yes }
						360 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						360 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { american_car_and_foundry_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = light_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2
		name = american_car_and_foundry_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		mutually_exclusive = { american_car_and_foundry_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3
		name = american_car_and_foundry_upgrade_3
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		mutually_exclusive = { american_car_and_foundry_upgrade_4 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_4
		name = american_car_and_foundry_upgrade_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { american_car_and_foundry_upgrade_3 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_5
		name = american_car_and_foundry_upgrade_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { american_car_and_foundry_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			reliability = -0.2
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_6
		name = american_car_and_foundry_upgrade_6
		icon = GFX_generic_mio_trait_icon_reliability

		mutually_exclusive = { american_car_and_foundry_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_7
		name = american_car_and_foundry_upgrade_7
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { american_car_and_foundry_upgrade_8 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = { 360 = { USA_decrease_SPA_state_support = yes } }
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_8
		name = american_car_and_foundry_upgrade_8
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { american_car_and_foundry_upgrade_7 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = { 360 = { USA_increase_SPA_state_support = yes } }
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_1
		name = american_car_and_foundry_upgrade_1_1
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		any_parent = { american_car_and_foundry_upgrade_1 american_car_and_foundry_upgrade_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_2
		name = american_car_and_foundry_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { american_car_and_foundry_upgrade_3 american_car_and_foundry_upgrade_4 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_3
		name = american_car_and_foundry_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { american_car_and_foundry_upgrade_5 american_car_and_foundry_upgrade_6 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_4
		name = american_car_and_foundry_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_tank_mio_equipment_tt
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_1_5
		name = american_car_and_foundry_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_1
		name = american_car_and_foundry_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { american_car_and_foundry_upgrade_1_1 american_car_and_foundry_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.1
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_2
		name = american_car_and_foundry_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { american_car_and_foundry_upgrade_1_2 american_car_and_foundry_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			reliability = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_3
		name = american_car_and_foundry_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			393 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			360 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { american_car_and_foundry_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				360 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = michigan_military_factories_removed }
					add_to_variable = { michigan_military_factories_removed = 1 }
				}
				else = {
					set_variable = { michigan_military_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_2_4
		name = american_car_and_foundry_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			360 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { american_car_and_foundry_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				360 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_variable = washington_civilian_factories_removed }
				add_to_variable = { washington_civilian_factories_removed = 2 }
			}
			else = {
				set_variable = { washington_civilian_factories_removed = 2 }
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3_1
		name = american_car_and_foundry_upgrade_3_1
		icon = GFX_icon_chrysler_MIO

		available = {
			chrysler_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				chrysler_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			defense = 0.03
			breakthrough = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			armor_value = 0.03
			ap_attack = 0.03
			hardness = 0.03
			air_attack = 0.03
		}

		on_complete = {
			chrysler_merge_levels_and_funds = yes
			custom_effect_tooltip = chrysler_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Chrysler
			set_mio_flag = USA_MIO_merge_once
			USA_chrysler_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3_2
		name = american_car_and_foundry_upgrade_3_2
		icon = GFX_icon_fisher_body_MIO

		available = {
			fisher_body_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				fisher_body_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			fisher_body_merge_levels_and_funds = yes
			custom_effect_tooltip = fisher_body_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Fisher
			set_mio_flag = USA_MIO_merge_once
			USA_fisher_body_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3_3
		name = american_car_and_foundry_upgrade_3_3
		icon = GFX_icon_pacific_car_and_foundry_MIO

		available = {
			pacific_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				pacific_car_and_foundry_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			pacific_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = pacific_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_PCF
			set_mio_flag = USA_MIO_merge_once
			USA_pacific_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3_4
		name = american_car_and_foundry_upgrade_3_4
		icon = GFX_icon_buick_MIO

		available = {
			buick_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				buick_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
		}

		on_complete = {
			buick_merge_levels_and_funds = yes
			custom_effect_tooltip = buick_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_buick_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = american_car_and_foundry_upgrade_3_5
		name = american_car_and_foundry_upgrade_3_5
		icon = GFX_icon_baldwin_MIO

		available = {
			baldwin_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				baldwin_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			armor_value = 0.1
		}

		on_complete = {
			baldwin_merge_levels_and_funds = yes
			custom_effect_tooltip = baldwin_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_baldwin_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_chrysler_organisation = { #Detroit Arsenal for WCA
	name = USA_chrysler
	icon = GFX_idea_chrysler

	allowed = { is_american_tag = yes }
	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = chrysler_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = chrysler_upgrade_1
		name = chrysler_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_medium_tank_division

		available = { 393 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { chrysler_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_medium_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { chrysler_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_medium_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { chrysler_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { chrysler_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = chrysler_upgrade_2
		name = chrysler_upgrade_2
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { chrysler_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = chrsyler_upgrade_3
		name = chrsyler_upgrade_3
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 3 y = 0 }

		equipment_bonus = {
			air_attack = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_4
		name = chrysler_upgrade_4
		icon = GFX_generic_mio_trait_icon_entrenchment

		mutually_exclusive = { chrysler_upgrade_5 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			entrenchment = 0.5
		}
	}

	trait = {
		token = chrysler_upgrade_5
		name = chrysler_upgrade_5
		icon = GFX_KR_generic_mio_trait_icon_fuel_drum

		mutually_exclusive = { chrysler_upgrade_4 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			fuel_capacity = 0.5
		}
	}

	trait = {
		token = chrysler_upgrade_6
		name = chrysler_upgrade_6
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { chrysler_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_loses_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = -1 } }
			}
		}
	}

	trait = {
		token = chrysler_upgrade_7
		name = chrysler_upgrade_7
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { chrysler_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_gains_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = 1 } }
			}
		}
	}

	trait = {
		token = chrysler_upgrade_1_1
		name = chrysler_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { chrysler_upgrade_1 chrysler_upgrade_2 }

		mutually_exclusive = { chrysler_upgrade_1_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_2
		name = chrysler_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { chrysler_upgrade_1 chrysler_upgrade_2 }

		mutually_exclusive = { chrysler_upgrade_1_1 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_3
		name = chrysler_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { chrsyler_upgrade_3 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			hard_attack = 0.1
			ap_attack = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_4
		name = chrysler_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { chrysler_upgrade_4 chrysler_upgrade_5 }

		mutually_exclusive = { chrysler_upgrade_1_5 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_5
		name = chrysler_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { chrysler_upgrade_4 chrysler_upgrade_5 }

		mutually_exclusive = { chrysler_upgrade_1_4 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_1_6
		name = chrysler_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_medium_tank_mio_equipment_tt
		}
	}

	trait = {
		token = chrysler_upgrade_1_7
		name = chrysler_upgrade_1_7
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = chrysler_upgrade_2_1
		name = chrysler_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { chrysler_upgrade_1_1 chrysler_upgrade_1_2 }
		all_parents = { chrysler_upgrade_1_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			soft_attack = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_2_2
		name = chrysler_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { chrysler_upgrade_1_4 chrysler_upgrade_1_5 }
		all_parents = { chrysler_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = chrysler_upgrade_2_3
		name = chrysler_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { chrysler_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_military_factories_removed }
					add_to_variable = { washington_military_factories_removed = 1 }
				}
				else = {
					set_variable = { washington_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = chrysler_upgrade_2_4
		name = chrysler_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { chrysler_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = chrysler_upgrade_3_1
		name = chrysler_upgrade_3_1
		icon = GFX_icon_american_car_and_foundry_MIO

		available = {
			american_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				american_car_and_foundry_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			american_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = american_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Chrysler
			set_mio_flag = USA_MIO_merge_once
			USA_american_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = chrysler_upgrade_3_2
		name = chrysler_upgrade_3_2
		icon = GFX_icon_fisher_body_MIO

		available = {
			fisher_body_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				fisher_body_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			fisher_body_merge_levels_and_funds = yes
			custom_effect_tooltip = fisher_body_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_Fisher
			set_mio_flag = USA_MIO_merge_once
			USA_fisher_body_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = chrysler_upgrade_3_3
		name = chrysler_upgrade_3_3
		icon = GFX_icon_pacific_car_and_foundry_MIO

		available = {
			pacific_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				pacific_car_and_foundry_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			pacific_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = pacific_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_PCF
			set_mio_flag = USA_MIO_merge_once
			USA_pacific_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = chrysler_upgrade_3_4
		name = chrysler_upgrade_3_4
		icon = GFX_icon_buick_MIO

		available = {
			buick_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				buick_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
		}

		on_complete = {
			buick_merge_levels_and_funds = yes
			custom_effect_tooltip = buick_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_buick_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = chrysler_upgrade_3_5
		name = chrysler_upgrade_3_5
		icon = GFX_icon_baldwin_MIO

		available = {
			baldwin_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				baldwin_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			armor_value = 0.1
		}

		on_complete = {
			baldwin_merge_levels_and_funds = yes
			custom_effect_tooltip = baldwin_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_baldwin_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_fisher_body_organisation = { #Fisher Body
	name = USA_fisher_tank_arsenal
	icon = GFX_idea_USA_fisher_tank_arsenal

	allowed = { is_american_tag = yes }
	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = fisher_body_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = fisher_body_upgrade_1
		name = fisher_body_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_medium_tank_division

		available = {
			393 = { is_fully_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_medium_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_medium_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { fisher_body_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2
		name = fisher_body_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_1 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = fisher_body_upgrade_normal
		name = fisher_body_upgrade_normal
		icon = GFX_generic_mio_department_icon_tank_general_line_efficiency

		visible = {
			NOT = {
				has_mio_flag = fisher_body_normal_upgrades
				has_mio_flag = fisher_body_improved_upgrades
			}
		}

		position = { x = 2 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = fisher_body_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = fisher_body_upgrade_3
		name = fisher_body_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = fisher_body_upgrade_improved
		name = fisher_body_upgrade_improved
		icon = GFX_generic_mio_department_icon_tank_general_technology

		visible = {
			NOT = {
				has_mio_flag = fisher_body_normal_upgrades
				has_mio_flag = fisher_body_improved_upgrades
			}
		}

		position = { x = 4 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_mils
			set_mio_flag = fisher_body_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = fisher_body_upgrade_4
		name = fisher_body_upgrade_4
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_5 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = fisher_body_upgrade_5
		name = fisher_body_upgrade_5
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			check_variable = { funds > 700 }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		mutually_exclusive = { fisher_body_upgrade_4 }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		on_complete = {
			add_mio_funds = -700
		}
	}

	trait = {
		token = fisher_body_upgrade_6
		name = fisher_body_upgrade_6
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { fisher_body_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_loses_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = -1 } }
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_7
		name = fisher_body_upgrade_7
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { fisher_body_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_gains_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = 1 } }
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_1
		name = fisher_body_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		any_parent = { fisher_body_upgrade_1 fisher_body_upgrade_2 }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.025
		}
	}

	trait = {
		token = fisher_body_upgrade_1_2
		name = fisher_body_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_3 }

		mutually_exclusive = { fisher_body_upgrade_1_3 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = fisher_body_upgrade_1_3
		name = fisher_body_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_3 }

		mutually_exclusive = { fisher_body_upgrade_1_2 }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.3
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.2
		}
	}

	trait = {
		token = fisher_body_upgrade_1_4
		name = fisher_body_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_resources

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		any_parent = { fisher_body_upgrade_4 fisher_body_upgrade_5 }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.05
		}
	}

	trait = {
		token = fisher_body_upgrade_1_5
		name = fisher_body_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_medium_tank_mio_equipment_tt
		}
	}

	trait = {
		token = fisher_body_upgrade_1_6
		name = fisher_body_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = fisher_body_upgrade_2_1
		name = fisher_body_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_1_1 }
		any_parent = { fisher_body_upgrade_1_2 fisher_body_upgrade_1_3 }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_conversion_speed_factor = 0.25
		}
	}

	trait = {
		token = fisher_body_upgrade_2_2
		name = fisher_body_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		visible = { NOT = { has_mio_flag = fisher_body_improved_upgrades } }

		all_parents = { fisher_body_upgrade_1_4 }
		any_parent = { fisher_body_upgrade_1_2 fisher_body_upgrade_1_3 }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
			production_conversion_speed_factor = 0.25
		}
	}

	trait = {
		token = fisher_body_upgrade_2_3
		name = fisher_body_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { fisher_body_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_military_factories_removed }
					add_to_variable = { washington_military_factories_removed = 1 }
				}
				else = {
					set_variable = { washington_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = fisher_body_upgrade_2_4
		name = fisher_body_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { fisher_body_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = fisher_body_upgrade_3_1
		name = fisher_body_upgrade_3_1
		icon = GFX_icon_american_car_and_foundry_MIO

		available = {
			american_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				american_car_and_foundry_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			american_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = american_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Fisher
			set_mio_flag = USA_MIO_merge_once
			USA_american_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = fisher_body_upgrade_3_2
		name = fisher_body_upgrade_3_2
		icon = GFX_icon_chrysler_MIO

		available = {
			american_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				chrysler_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			defense = 0.03
			breakthrough = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			armor_value = 0.03
			ap_attack = 0.03
			hardness = 0.03
			air_attack = 0.03
		}

		on_complete = {
			chrysler_merge_levels_and_funds = yes
			custom_effect_tooltip = chrysler_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_Fisher
			set_mio_flag = USA_MIO_merge_once
			USA_chrysler_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = fisher_body_upgrade_3_3
		name = fisher_body_upgrade_3_3
		icon = GFX_icon_pacific_car_and_foundry_MIO

		available = {
			pacific_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				pacific_car_and_foundry_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			pacific_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = pacific_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Fisher_PCF
			set_mio_flag = USA_MIO_merge_once
			USA_pacific_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = fisher_body_upgrade_3_4
		name = fisher_body_upgrade_3_4
		icon = GFX_icon_buick_MIO

		available = {
			buick_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				buick_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
		}

		on_complete = {
			buick_merge_levels_and_funds = yes
			custom_effect_tooltip = buick_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Fisher_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_buick_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = fisher_body_upgrade_3_5
		name = fisher_body_upgrade_3_5
		icon = GFX_icon_baldwin_MIO

		available = {
			baldwin_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				baldwin_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			armor_value = 0.1
		}

		on_complete = {
			baldwin_merge_levels_and_funds = yes
			custom_effect_tooltip = baldwin_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Fisher_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_baldwin_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = fisher_body_upgrade_1_improved
		name = fisher_body_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_medium_tank_division

		available = {
			393 = { is_owned_and_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_2_improved }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_medium_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_medium_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_medium_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { fisher_body_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Medium Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { fisher_body_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2_improved
		name = fisher_body_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_1_improved }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.037
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_3_improved
		name = fisher_body_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.022
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_4_improved
		name = fisher_body_upgrade_4
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_5_improved }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.075
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_5_improved
		name = fisher_body_upgrade_5
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			check_variable = { funds > 700 }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = fisher_body_normal_upgrades
					has_mio_flag = fisher_body_improved_upgrades
				}
			}
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		mutually_exclusive = { fisher_body_upgrade_4_improved }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.15
		}

		on_complete = {
			add_mio_funds = -700
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_1_improved
		name = fisher_body_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		any_parent = { fisher_body_upgrade_1_improved fisher_body_upgrade_2_improved }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.038
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_2_improved
		name = fisher_body_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_3_improved }

		mutually_exclusive = { fisher_body_upgrade_1_3_improved }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.023
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_3_improved
		name = fisher_body_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_3_improved }

		mutually_exclusive = { fisher_body_upgrade_1_2_improved }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.045
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.2
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_1_4_improved
		name = fisher_body_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_resources

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		any_parent = { fisher_body_upgrade_4_improved fisher_body_upgrade_5_improved }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.075
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2_1_improved
		name = fisher_body_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_1_1_improved }
		any_parent = { fisher_body_upgrade_1_2_improved fisher_body_upgrade_1_3_improved }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.075
			production_conversion_speed_factor = 0.37
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = fisher_body_upgrade_2_2_improved
		name = fisher_body_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			393 = { #Michigan
				is_owned_and_controlled_by = FROM
				industrial_complex > 2
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = fisher_body_improved_upgrades }

		all_parents = { fisher_body_upgrade_1_4_improved }
		any_parent = { fisher_body_upgrade_1_2_improved fisher_body_upgrade_1_3_improved }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.15
			production_conversion_speed_factor = 0.38
		}

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
				393 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}
}
USA_pacific_car_and_foundry_organisation = { #Pacific Car and Foundry
	name = USA_pacific_car_and_foundry
	icon = GFX_idea_USA_pacific_car_and_foundry

	allowed = { is_american_tag = yes }

	available = {
		386 = { is_owned_and_controlled_by = FROM } #Washington
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = pacific_car_and_foundry_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1
		name = pacific_car_and_foundry_upgrade_1
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_attack = -0.05
			reliability = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2
		name = pacific_car_and_foundry_upgrade_2
		icon = GFX_generic_mio_trait_icon_soft_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_3 }

		equipment_bonus = {
			soft_attack = -0.05
			build_cost_ic = -0.04
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3
		name = pacific_car_and_foundry_upgrade_3
		icon = GFX_KR_generic_mio_trait_icon_light_tank_division

		available = { 386 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_2 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			soft_attack = 0.05
			build_cost_ic = 0.04
		}

		on_complete = {
			FROM = {
				USA_add_light_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { pacific_car_and_foundry_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[361.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[361.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { pacific_car_and_foundry_stockpile_trait_unlocked = yes }
						386 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						386 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { pacific_car_and_foundry_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = light_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_4
		name = pacific_car_and_foundry_upgrade_4
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 5 y = 0 }

		equipment_bonus = {
			breakthrough = -0.05
			ap_attack = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_1
		name = pacific_car_and_foundry_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { pacific_car_and_foundry_upgrade_1 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_2
		name = pacific_car_and_foundry_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { pacific_car_and_foundry_upgrade_2 pacific_car_and_foundry_upgrade_3 }

		position = { x = 2 y = 1 }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_1_3 }

		equipment_bonus = {
			maximum_speed = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_3
		name = pacific_car_and_foundry_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { pacific_car_and_foundry_upgrade_2 pacific_car_and_foundry_upgrade_3 }

		position = { x = 3 y = 1 }

		mutually_exclusive = { pacific_car_and_foundry_upgrade_1_2 }

		equipment_bonus = {
			maximum_speed = -0.1
			build_cost_ic = -0.04
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_4
		name = pacific_car_and_foundry_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { pacific_car_and_foundry_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hard_attack = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_5
		name = pacific_car_and_foundry_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_tank_mio_equipment_tt
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_1_6
		name = pacific_car_and_foundry_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_funds

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_1
		name = pacific_car_and_foundry_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_hardness

		all_parents = { pacific_car_and_foundry_upgrade_1_1 }
		any_parent = { pacific_car_and_foundry_upgrade_1_2 pacific_car_and_foundry_upgrade_1_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			hardness = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_2
		name = pacific_car_and_foundry_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { pacific_car_and_foundry_upgrade_1_4 }
		any_parent = { pacific_car_and_foundry_upgrade_1_2 pacific_car_and_foundry_upgrade_1_3 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			armor_value = -0.05
			build_cost_ic = -0.02
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_3
		name = pacific_car_and_foundry_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			393 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			386 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { pacific_car_and_foundry_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				386 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = michigan_military_factories_removed }
					add_to_variable = { michigan_military_factories_removed = 1 }
				}
				else = {
					set_variable = { michigan_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_2_4
		name = pacific_car_and_foundry_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			386 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { pacific_car_and_foundry_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				386 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3_1
		name = pacific_car_and_foundry_upgrade_3_1
		icon = GFX_icon_american_car_and_foundry_MIO

		available = {
			american_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				american_car_and_foundry_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			american_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = american_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_PCF
			set_mio_flag = USA_MIO_merge_once
			USA_american_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3_2
		name = pacific_car_and_foundry_upgrade_3_2
		icon = GFX_icon_chrysler_MIO

		available = {
			chrysler_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				chrysler_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			defense = 0.03
			breakthrough = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			armor_value = 0.03
			ap_attack = 0.03
			hardness = 0.03
			air_attack = 0.03
		}

		on_complete = {
			chrysler_merge_levels_and_funds = yes
			custom_effect_tooltip = chrysler_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_PCF
			set_mio_flag = USA_MIO_merge_once
			USA_chrysler_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3_3
		name = pacific_car_and_foundry_upgrade_3_3
		icon = GFX_icon_fisher_body_MIO

		available = {
			fisher_body_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				fisher_body_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			fisher_body_merge_levels_and_funds = yes
			custom_effect_tooltip = fisher_body_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Fisher_PCF
			set_mio_flag = USA_MIO_merge_once
			USA_fisher_body_merge_flag = yes
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3_4
		name = pacific_car_and_foundry_upgrade_3_4
		icon = GFX_icon_buick_MIO

		available = {
			buick_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				buick_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
		}

		on_complete = {
			buick_merge_levels_and_funds = yes
			custom_effect_tooltip = buick_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_PCF_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_buick_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = pacific_car_and_foundry_upgrade_3_5
		name = pacific_car_and_foundry_upgrade_3_5
		icon = GFX_icon_baldwin_MIO

		available = {
			baldwin_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				baldwin_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			armor_value = 0.1
		}

		on_complete = {
			baldwin_merge_levels_and_funds = yes
			custom_effect_tooltip = baldwin_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_PCF_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_baldwin_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_buick_organisation = { #Buick
	name = USA_buick
	icon = GFX_idea_USA_buick

	allowed = { is_american_tag = yes }

	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = buick_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = buick_upgrade_1
		name = buick_upgrade_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		position = { x = 0 y = 0 }

		mutually_exclusive = { buick_upgrade_2 buick_upgrade_3 }

		equipment_bonus = {
			hard_attack = 0.05
		}

		on_complete = {
			custom_effect_tooltip = buick_upgrade_1_mutually_exclusive_tt
		}
	}

	trait = {
		token = buick_upgrade_2
		name = buick_upgrade_2
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 1 y = 0 }

		mutually_exclusive = { buick_upgrade_1 buick_upgrade_3 }

		equipment_bonus = {
			hard_attack = -0.1
			ap_attack = 0.1
		}

		on_complete = {
			custom_effect_tooltip = buick_upgrade_2_mutually_exclusive_tt
		}
	}

	trait = {
		token = buick_upgrade_3
		name = buick_upgrade_3
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 2 y = 0 }

		mutually_exclusive = { buick_upgrade_1 buick_upgrade_2 }

		equipment_bonus = {
			hard_attack = -0.2
			ap_attack = 0.2
		}

		on_complete = {
			custom_effect_tooltip = buick_upgrade_3_mutually_exclusive_tt
		}
	}

	trait = {
		token = buick_upgrade_4
		name = buick_upgrade_4
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 4 y = 0 }

		mutually_exclusive = { buick_upgrade_5 buick_upgrade_6 }

		equipment_bonus = {
			defense = 0.05
		}

		on_complete = {
			custom_effect_tooltip = buick_upgrade_4_mutually_exclusive_tt
		}
	}

	trait = {
		token = buick_upgrade_5
		name = buick_upgrade_5
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 5 y = 0 }

		mutually_exclusive = { buick_upgrade_4 buick_upgrade_6 }

		equipment_bonus = {
			defense = 0.1
			hard_attack = -0.05
		}

		on_complete = {
			custom_effect_tooltip = buick_upgrade_5_mutually_exclusive_tt
		}
	}

	trait = {
		token = buick_upgrade_6
		name = buick_upgrade_6
		icon = GFX_KR_generic_mio_trait_icon_light_tank_division

		available = { 393 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { buick_upgrade_4 buick_upgrade_5 }

		position = { x = 6 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { buick_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_light_armored_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { buick_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Light Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { buick_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = light_tank_chassis
						amount = 200
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = buick_upgrade_6_mutually_exclusive_tt
			}
		}
	}

	trait = {
		token = buick_upgrade_7
		name = buick_upgrade_7
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { buick_upgrade_8 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_loses_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = -1 } }
			}
		}
	}

	trait = {
		token = buick_upgrade_8
		name = buick_upgrade_8
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { buick_upgrade_7 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_gains_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = 1 } }
			}
		}
	}

	trait = {
		token = buick_upgrade_1_1
		name = buick_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { buick_upgrade_1 buick_upgrade_2 buick_upgrade_3 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			hard_attack = 0.05
		}
	}

	trait = {
		token = buick_upgrade_1_2
		name = buick_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_ap_attack

		position = { x = 3 y = 1 }

		equipment_bonus = {
			ap_attack = 0.1
		}
	}

	trait = {
		token = buick_upgrade_1_3
		name = buick_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { buick_upgrade_4 buick_upgrade_5 buick_upgrade_6 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = buick_upgrade_1_4
		name = buick_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_tank_mio_equipment_tt
		}
	}

	trait = {
		token = buick_upgrade_1_5
		name = buick_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_production_capacity

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = buick_upgrade_2_1
		name = buick_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { buick_upgrade_1_1 buick_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.1
		}
	}

	trait = {
		token = buick_upgrade_2_2
		name = buick_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { buick_upgrade_1_2 buick_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			defense = 0.05
			ap_attack = 0.1
		}
	}

	trait = {
		token = buick_upgrade_2_3
		name = buick_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { buick_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_military_factories_removed }
					add_to_variable = { washington_military_factories_removed = 1 }
				}
				else = {
					set_variable = { washington_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = buick_upgrade_2_4
		name = buick_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			360 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { buick_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				360 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = philadelphia_civilian_factories_removed }
					add_to_variable = { philadelphia_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { philadelphia_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = buick_upgrade_3_1
		name = buick_upgrade_3_1
		icon = GFX_icon_american_car_and_foundry_MIO

		available = {
			american_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				american_car_and_foundry_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			american_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = american_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_american_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = buick_upgrade_3_2
		name = buick_upgrade_3_2
		icon = GFX_icon_chrysler_MIO

		available = {
			chrysler_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				chrysler_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			defense = 0.03
			breakthrough = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			armor_value = 0.03
			ap_attack = 0.03
			hardness = 0.03
			air_attack = 0.03
		}

		on_complete = {
			chrysler_merge_levels_and_funds = yes
			custom_effect_tooltip = chrysler_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_chrysler_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = buick_upgrade_3_3
		name = buick_upgrade_3_3
		icon = GFX_icon_fisher_body_MIO

		available = {
			fisher_body_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				fisher_body_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			fisher_body_merge_levels_and_funds = yes
			custom_effect_tooltip = fisher_body_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Fisher_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_fisher_body_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = buick_upgrade_3_4
		name = buick_upgrade_3_4
		icon = GFX_icon_pacific_car_and_foundry_MIO

		available = {
			pacific_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				pacific_car_and_foundry_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			pacific_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = pacific_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_PCF_Buick
			set_mio_flag = USA_MIO_merge_once
			USA_pacific_car_and_foundry_merge_flag = yes
		}
	}

	trait = {
		token = buick_upgrade_3_5
		name = buick_upgrade_3_5
		icon = GFX_icon_baldwin_MIO

		available = {
			baldwin_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				baldwin_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			armor_value = 0.1
		}

		on_complete = {
			baldwin_merge_levels_and_funds = yes
			custom_effect_tooltip = baldwin_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Buick_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_baldwin_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_baldwin_organisation = { #Baldwin
	name = USA_baldwin
	icon = GFX_idea_USA_baldwin

	allowed = { is_american_tag = yes }

	available = {
		975 = { is_owned_and_controlled_by = FROM } #Michigan
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = { armor }

	research_categories = { mio_cat_tech_all_armor_and_modules }

	ai_will_do = { base = 10 }

	initial_trait = {
		name = baldwin_mio_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = baldwin_upgrade_1
		name = baldwin_upgrade_1
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { baldwin_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2
		name = baldwin_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_heavy_tank_division

		available = { 975 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { baldwin_upgrade_1 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				USA_add_heavy_armored_div = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { baldwin_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_armored_division
							STRENGTH = "100%"
							LOCATION = "[975.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_heavy_armored_division
							STRENGTH = "100%"
							LOCATION = "[975.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_tank_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { baldwin_stockpile_trait_unlocked = yes }
						975 = {
							create_unit = {
								division = "division_template = \"Heavy Armored Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						975 = {
							create_unit = {
								division = "division_template = \"Heavy Armored Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { baldwin_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = heavy_tank_chassis
						amount = 200
					}
				}
			}
		}
	}

	trait = {
		token = baldwin_upgrade_3
		name = baldwin_upgrade_3
		icon = GFX_generic_mio_trait_icon_hardness

		mutually_exclusive = { baldwin_upgrade_4 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			hardness = 0.05
		}
	}

	trait = {
		token = baldwin_upgrade_4
		name = baldwin_upgrade_4
		icon = GFX_generic_mio_trait_icon_hardness

		available = {
			FROM = { has_army_experience > 25 }
		}

		mutually_exclusive = { baldwin_upgrade_3 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hardness = 0.1
		}

		on_complete = {
			FROM = { army_experience = -25 }
		}
	}

	trait = {
		token = baldwin_upgrade_1_1
		name = baldwin_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { baldwin_upgrade_1 baldwin_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_1_2
		name = baldwin_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_hardness

		any_parent = { baldwin_upgrade_3 baldwin_upgrade_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_1_3
		name = baldwin_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_breakthrough

		position = { x = 6 y = 1 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_1_4
		name = baldwin_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_tank_mio_equipment_tt
		}
	}

	trait = {
		token = baldwin_upgrade_1_5
		name = baldwin_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { army_experience = 50 }
		}
	}

	trait = {
		token = baldwin_upgrade_2_1
		name = baldwin_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { baldwin_upgrade_1_1 baldwin_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2_2
		name = baldwin_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_hardness

		all_parents = { baldwin_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			hardness = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2_3
		name = baldwin_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { baldwin_upgrade_1_2 baldwin_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = baldwin_upgrade_2_4
		name = baldwin_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			393 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			975 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { baldwin_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				393 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				975 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = michigan_military_factories_removed }
					add_to_variable = { michigan_military_factories_removed = 1 }
				}
				else = {
					set_variable = { michigan_military_factories_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = baldwin_upgrade_2_5
		name = baldwin_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			386 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			975 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { baldwin_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				386 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				975 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = washington_civilian_factories_removed }
					add_to_variable = { washington_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { washington_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = baldwin_upgrade_3_1
		name = baldwin_upgrade_3_1
		icon = GFX_icon_american_car_and_foundry_MIO

		available = {
			american_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_American_Car_and_Foundry_not_merged_yet
				american_car_and_foundry_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			american_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = american_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AMCF_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_american_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = baldwin_upgrade_3_2
		name = baldwin_upgrade_3_2
		icon = GFX_icon_chrysler_MIO

		available = {
			chrysler_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Chrysler_not_merged_yet
				chrysler_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			defense = 0.03
			breakthrough = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			armor_value = 0.03
			ap_attack = 0.03
			hardness = 0.03
			air_attack = 0.03
		}

		on_complete = {
			chrysler_merge_levels_and_funds = yes
			custom_effect_tooltip = chrysler_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Chrysler_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_chrysler_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = baldwin_upgrade_3_3
		name = baldwin_upgrade_3_3
		icon = GFX_icon_fisher_body_MIO

		available = {
			fisher_body_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Fisher_Body_not_merged_yet
				fisher_body_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			fisher_body_merge_levels_and_funds = yes
			custom_effect_tooltip = fisher_body_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Fisher_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_fisher_body_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = baldwin_upgrade_3_4
		name = baldwin_upgrade_3_4
		icon = GFX_icon_pacific_car_and_foundry_MIO

		available = {
			pacific_car_and_foundry_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Pacific_Car_and_Foundry_not_merged_yet
				pacific_car_and_foundry_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			pacific_car_and_foundry_merge_levels_and_funds = yes
			custom_effect_tooltip = pacific_car_and_foundry_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_PCF_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_pacific_car_and_foundry_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = baldwin_upgrade_3_5
		name = baldwin_upgrade_3_5
		icon = GFX_icon_buick_MIO

		available = {
			buick_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Baldwin_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Buick_not_merged_yet
				buick_has_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			hard_attack = 0.1
		}

		on_complete = {
			buick_merge_levels_and_funds = yes
			custom_effect_tooltip = buick_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Buick_Baldwin
			set_mio_flag = USA_MIO_merge_once
			USA_buick_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}

##################
### Naval MIOs ###
##################
USA_newport_news_shipbuilding_organisation = { #Newport News Shipbuilding
	name = USA_newport_news_shipbuilding
	icon = GFX_idea_newport_news_shipbuilding

	allowed = { is_american_tag = yes }
	available = {
		362 = { is_owned_and_controlled_by = FROM } #Virginia
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		mio_cat_eq_all_battleship
		mio_cat_eq_all_carrier
	}

	research_categories = {
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_carrier_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = newport_news_shipbuilding_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1
		name = newport_news_shipbuilding_upgrade_1
		icon = GFX_generic_mio_department_icon_ship_carrier

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { newport_news_shipbuilding_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" creator = FROM }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2
		name = newport_news_shipbuilding_upgrade_2
		icon = GFX_generic_mio_trait_icon_naval_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			naval_speed = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_normal
		name = newport_news_shipbuilding_normal
		icon = GFX_mio_cat_eq_all_battleship

		visible = {
			NOT = {
				has_mio_flag = newport_news_shipbuilding_normal_upgrades
				has_mio_flag = newport_news_shipbuilding_improved_upgrades
			}
		}

		position = { x = 2 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = newport_news_shipbuilding_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3
		name = newport_news_shipbuilding_upgrade_3
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			hg_armor_piercing = 0.05
			lg_armor_piercing = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_improved
		name = newport_news_shipbuilding_upgrade_improved
		icon = GFX_generic_mio_department_icon_ship_capital_ship_utility

		visible = {
			NOT = {
				has_mio_flag = newport_news_shipbuilding_normal_upgrades
				has_mio_flag = newport_news_shipbuilding_improved_upgrades
			}
		}

		position = { x = 4 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_docks
			set_mio_flag = newport_news_shipbuilding_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_4
		name = newport_news_shipbuilding_upgrade_4
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_5 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hg_attack = 0.05
			lg_attack = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_5
		name = newport_news_shipbuilding_upgrade_5
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_4 }

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_all_battleship }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_6
		name = newport_news_shipbuilding_upgrade_6
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_loses_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = -1 } }
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_7
		name = newport_news_shipbuilding_upgrade_7
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_gains_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = 1 } }
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_1
		name = newport_news_shipbuilding_upgrade_1_1
		icon = GFX_generic_mio_department_icon_ship_carrier_utility

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		all_parents = { newport_news_shipbuilding_upgrade_3 }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 2 y = 1 }

		limit_to_equipment_type = { mio_cat_eq_all_carrier }

		equipment_bonus = {
			carrier_size = 1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_2
		name = newport_news_shipbuilding_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		all_parents = { newport_news_shipbuilding_upgrade_3 }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_1 }

		position = { x = 4 y = 1 }

		limit_to_equipment_type = { mio_cat_eq_all_battleship }

		equipment_bonus = {
			hg_armor_piercing = 0.1
			lg_armor_piercing = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_3
		name = newport_news_shipbuilding_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_4
		name = newport_news_shipbuilding_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_1
		name = newport_news_shipbuilding_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_1 newport_news_shipbuilding_upgrade_2 }
		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			naval_heavy_gun_hit_chance_factor = 0.1
			naval_light_gun_hit_chance_factor = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_2
		name = newport_news_shipbuilding_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_armor_value

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_3
		name = newport_news_shipbuilding_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_naval_speed

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_4
		name = newport_news_shipbuilding_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_lg_attack

		visible = { NOT = { has_mio_flag = newport_news_shipbuilding_improved_upgrades } }

		any_parent = { newport_news_shipbuilding_upgrade_4 newport_news_shipbuilding_upgrade_5 }
		any_parent = { newport_news_shipbuilding_upgrade_1_1 newport_news_shipbuilding_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			hg_attack = 0.05
			lg_attack = 0.05
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_5
		name = newport_news_shipbuilding_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_6
		name = newport_news_shipbuilding_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_1
		name = newport_news_shipbuilding_upgrade_3_1
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			norfolk_naval_yard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				norfolk_naval_yard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			norfolk_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = norfolk_naval_yard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Norfolk
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_2
		name = newport_news_shipbuilding_upgrade_3_2
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			kaiser_shipyards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				kaiser_shipyards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			kaiser_shipyards_merge_levels_and_funds = yes
			custom_effect_tooltip = kaiser_shipyards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Kaiser
			set_mio_flag = USA_MIO_merge_once
			USA_kaiser_shipyards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_3
		name = newport_news_shipbuilding_upgrade_3_3
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			brooklyn_naval_yards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				brooklyn_naval_yards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			brooklyn_naval_yards_merge_levels_and_funds = yes
			custom_effect_tooltip = brooklyn_naval_yards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Brooklyn
			set_mio_flag = USA_MIO_merge_once
			USA_brooklyn_naval_yards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_4
		name = newport_news_shipbuilding_upgrade_3_4
		icon = GFX_icon_electric_boat_MIO

		available = {
			electric_boat_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			electric_boat_merge_levels_and_funds = yes
			custom_effect_tooltip = electric_boat_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_EB
			set_mio_flag = USA_MIO_merge_once
			USA_electric_boat_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_5
		name = newport_news_shipbuilding_upgrade_3_5
		icon = GFX_icon_higgins_MIO

		available = {
			higgins_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			higgins_merge_levels_and_funds = yes
			custom_effect_tooltip = higgins_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_higgins_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_6
		name = newport_news_shipbuilding_upgrade_3_6
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			mare_island_naval_shipyard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				mare_island_naval_shipyard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			mare_island_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = mare_island_naval_shipyard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_mare_island_naval_shipyard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_improved
		name = newport_news_shipbuilding_upgrade_1
		icon = GFX_generic_mio_department_icon_ship_carrier

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_2_improved }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { newport_news_shipbuilding_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" creator = FROM }
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_carrier_1 equipment_variant = "Yorktown Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_improved
		name = newport_news_shipbuilding_upgrade_2
		icon = GFX_generic_mio_trait_icon_naval_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_improved }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			naval_speed = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_3_improved
		name = newport_news_shipbuilding_upgrade_3
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				dockyard > 2
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			hg_armor_piercing = 0.075
			lg_armor_piercing = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_4_improved
		name = newport_news_shipbuilding_upgrade_4
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_5_improved }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hg_attack = 0.075
			lg_attack = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_5_improved
		name = newport_news_shipbuilding_upgrade_5
		icon = GFX_generic_mio_trait_icon_hg_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = newport_news_shipbuilding_normal_upgrades
					has_mio_flag = newport_news_shipbuilding_improved_upgrades
				}
			}
			362 = { #Virginia
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_4_improved }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hg_attack = 0.15
			lg_attack = 0.15
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_1_improved
		name = newport_news_shipbuilding_upgrade_1_1
		icon = GFX_generic_mio_department_icon_ship_carrier_utility

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					industrial_complex > 4
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		all_parents = { newport_news_shipbuilding_upgrade_3_improved }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			carrier_size = 2
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_1_2_improved
		name = newport_news_shipbuilding_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					industrial_complex > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		all_parents = { newport_news_shipbuilding_upgrade_3_improved }

		mutually_exclusive = { newport_news_shipbuilding_upgrade_1_1_improved }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			hg_armor_piercing = 0.15
			lg_armor_piercing = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 2 }
						remove_building = {
							type = industrial_complex
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_1_improved
		name = newport_news_shipbuilding_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_1_improved newport_news_shipbuilding_upgrade_2_improved }
		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			naval_heavy_gun_hit_chance_factor = 0.15
			naval_light_gun_hit_chance_factor = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_2_improved
		name = newport_news_shipbuilding_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_armor_value

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			armor_value = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_3_improved
		name = newport_news_shipbuilding_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_naval_speed

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			naval_speed = 0.15
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = newport_news_shipbuilding_upgrade_2_4_improved
		name = newport_news_shipbuilding_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_lg_attack

		available = {
			FROM = {
				362 = { #Virginia
					is_owned_and_controlled_by = FROM
					dockyard > 2
				}
			}
		}

		visible = { has_mio_flag = newport_news_shipbuilding_improved_upgrades }

		any_parent = { newport_news_shipbuilding_upgrade_4_improved newport_news_shipbuilding_upgrade_5_improved }
		any_parent = { newport_news_shipbuilding_upgrade_1_1_improved newport_news_shipbuilding_upgrade_1_2_improved }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			hg_attack = 0.075
			lg_attack = 0.075
		}

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { dockyard > 2 }
						remove_building = {
							type = dockyard
							level = 3
						}
					}
				}
			}
		}
	}
}

USA_norfolk_naval_shipyard_organisation = { #Norfolk Naval Shipyard
	name = USA_norfolk_naval_shipyard
	icon = GFX_idea_norfolk_naval_yard

	allowed = { is_american_tag = yes }
	available = {
		362 = { is_owned_and_controlled_by = FROM } #Virginia
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
	}

	research_categories = {
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_destroyer_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = norfolk_naval_shipyard_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1
		name = norfolk_naval_shipyard_upgrade_1
		icon = GFX_generic_mio_trait_icon_sub_detection

		position = { x = 1 y = 0 }

		equipment_bonus = {
			sub_detection = 0.15
			lg_attack = -0.3
			hg_attack = -0.3
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2
		name = norfolk_naval_shipyard_upgrade_2
		icon = GFX_military_industrial_organization_light_cruiser

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_3 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			torpedo_attack = -0.3
		}

		on_complete = {
			FROM = {
				if = {
					limit = { norfolk_naval_shipyard_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Brooklyn Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3
		name = norfolk_naval_shipyard_upgrade_3
		icon = GFX_generic_mio_trait_icon_naval_range

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			naval_range = 0.1
			torpedo_attack = -0.3
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_4
		name = norfolk_naval_shipyard_upgrade_4
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 5 y = 0 }

		equipment_bonus = {
			air_attack = 0.2
			hg_armor_piercing = -0.3
			lg_armor_piercing = -0.3
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_5
		name = norfolk_naval_shipyard_upgrade_5
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_6 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_loses_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = -1 } }
			}
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_6
		name = norfolk_naval_shipyard_upgrade_6
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_5 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_gains_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = 1 } }
			}
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_1
		name = norfolk_naval_shipyard_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_sub_detection

		any_parent = { norfolk_naval_shipyard_upgrade_2 norfolk_naval_shipyard_upgrade_3 }
		all_parents = { norfolk_naval_shipyard_upgrade_4 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_1_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			sub_detection = 0.2
			sub_attack = -0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_2
		name = norfolk_naval_shipyard_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_sub_detection

		any_parent = { norfolk_naval_shipyard_upgrade_2 norfolk_naval_shipyard_upgrade_3 }
		all_parents = { norfolk_naval_shipyard_upgrade_4 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_1_1 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			sub_detection = 0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_3
		name = norfolk_naval_shipyard_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_1_4
		name = norfolk_naval_shipyard_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_navy_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { navy_experience = 50 }
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_1
		name = norfolk_naval_shipyard_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_sub_attack

		all_parents = { norfolk_naval_shipyard_upgrade_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			sub_attack = 0.15
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_2
		name = norfolk_naval_shipyard_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_sub_attack

		all_parents = { norfolk_naval_shipyard_upgrade_1 }
		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			sub_attack = 0.1
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_3
		name = norfolk_naval_shipyard_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_4 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			anti_air_attack = 0.2
			build_cost_ic = 0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_4
		name = norfolk_naval_shipyard_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			anti_air_attack = 0.1
			naval_range = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_5
		name = norfolk_naval_shipyard_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { norfolk_naval_shipyard_upgrade_1_1 norfolk_naval_shipyard_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			anti_air_attack = 0.2
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_6
		name = norfolk_naval_shipyard_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_2_7
		name = norfolk_naval_shipyard_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { norfolk_naval_shipyard_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3_1
		name = norfolk_naval_shipyard_upgrade_3_1
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			newport_news_shipbuilding_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				newport_news_shipbuilding_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			newport_news_shipbuilding_merge_levels_and_funds = yes
			custom_effect_tooltip = newport_news_shipbuilding_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Norfolk
			set_mio_flag = USA_MIO_merge_once
			USA_newport_news_shipbuilding_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3_2
		name = norfolk_naval_shipyard_upgrade_3_2
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			kaiser_shipyards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				kaiser_shipyards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			kaiser_shipyards_merge_levels_and_funds = yes
			custom_effect_tooltip = kaiser_shipyards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Kaiser
			set_mio_flag = USA_MIO_merge_once
			USA_kaiser_shipyards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3_3
		name = norfolk_naval_shipyard_upgrade_3_3
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			brooklyn_naval_yards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				brooklyn_naval_yards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			brooklyn_naval_yards_merge_levels_and_funds = yes
			custom_effect_tooltip = brooklyn_naval_yards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Brooklyn
			set_mio_flag = USA_MIO_merge_once
			USA_brooklyn_naval_yards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3_4
		name = norfolk_naval_shipyard_upgrade_3_4
		icon = GFX_icon_electric_boat_MIO

		available = {
			electric_boat_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			electric_boat_merge_levels_and_funds = yes
			custom_effect_tooltip = electric_boat_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_EB
			set_mio_flag = USA_MIO_merge_once
			USA_electric_boat_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3_5
		name = norfolk_naval_shipyard_upgrade_3_5
		icon = GFX_icon_higgins_MIO

		available = {
			higgins_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			higgins_merge_levels_and_funds = yes
			custom_effect_tooltip = higgins_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_higgins_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = norfolk_naval_shipyard_upgrade_3_6
		name = norfolk_naval_shipyard_upgrade_3_6
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			mare_island_naval_shipyard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				mare_island_naval_shipyard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			mare_island_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = mare_island_naval_shipyard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_mare_island_naval_shipyard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}

USA_kaiser_shipyards_organisation = { #Kaiser Shipyards
	name = USA_kaiser_shipyards
	icon = GFX_idea_USA_kaiser_shipyards

	allowed = { is_american_tag = yes }
	available = {
		797 = { is_owned_and_controlled_by = FROM } #San Francisco
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = kaiser_shipyards_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1
		name = kaiser_shipyards_upgrade_1
		icon = GFX_generic_mio_trait_icon_max_strength

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			max_strength = 0.5
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2
		name = kaiser_shipyards_upgrade_2
		icon = GFX_military_industrial_organization_light_cruiser

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_3 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { kaiser_shipyards_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" creator = FROM }
					create_ship = { type = ship_hull_cruiser_2 equipment_variant = "Olympia Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3
		name = kaiser_shipyards_upgrade_3
		icon = GFX_KR_generic_mio_trait_icon_naval_refit_speed

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			check_variable = { funds > 700 }
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_2 }

		position = { x = 4 y = 0 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_3_hidden_upgrade }
			add_mio_funds = -700
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_1
		name = kaiser_shipyards_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 2 y = 1 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			air_attack = 0.5
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_2
		name = kaiser_shipyards_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_surface_visibility

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 3 y = 1 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			surface_visibility = -0.75
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_3
		name = kaiser_shipyards_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_naval_refit_cost

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 4 y = 1 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_1_3_hidden_upgrade }
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_4
		name = kaiser_shipyards_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_naval_refit

		any_parent = { kaiser_shipyards_upgrade_2 kaiser_shipyards_upgrade_3 }

		position = { x = 5 y = 1 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_1_4_hidden_upgrade }
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_5
		name = kaiser_shipyards_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_1_6
		name = kaiser_shipyards_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.3
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_1
		name = kaiser_shipyards_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { kaiser_shipyards_upgrade_1 kaiser_shipyards_upgrade_1_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = { convoy_1 }

		equipment_bonus = {
			max_strength = 0.5
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_2
		name = kaiser_shipyards_upgrade_2_2
		icon = GFX_KR_generic_mio_trait_icon_naval_accident_chance

		all_parents = { kaiser_shipyards_upgrade_1_1 kaiser_shipyards_upgrade_1_2 }

		position = { x = 2 y = 2 }

		mutually_exclusive = { kaiser_shipyards_upgrade_2_3 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_2_2_hidden_upgrade }
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_3
		name = kaiser_shipyards_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_naval_accident_chance

		all_parents = { kaiser_shipyards_upgrade_1_2 kaiser_shipyards_upgrade_1_3 }

		position = { x = 4 y = 2 }

		mutually_exclusive = { kaiser_shipyards_upgrade_2_2 }

		on_complete = {
			FROM = { add_ideas = kaiser_shipyards_upgrade_2_3_hidden_upgrade }
		}

		production_bonus = {
			production_capacity_factor = -0.05
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_4
		name = kaiser_shipyards_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_dockyards_removed }
					add_to_variable = { new_york_city_dockyards_removed = 1 }
				}
				else = {
					set_variable = { new_york_city_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_2_5
		name = kaiser_shipyards_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { kaiser_shipyards_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_orleans_civilian_factory_removed }
					add_to_variable = { new_orleans_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { new_orleans_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3_1
		name = kaiser_shipyards_upgrade_3_1
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			newport_news_shipbuilding_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				newport_news_shipbuilding_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			newport_news_shipbuilding_merge_levels_and_funds = yes
			custom_effect_tooltip = newport_news_shipbuilding_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Kaiser
			set_mio_flag = USA_MIO_merge_once
			USA_newport_news_shipbuilding_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3_2
		name = kaiser_shipyards_upgrade_3_2
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			norfolk_naval_yard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				norfolk_naval_yard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			norfolk_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = norfolk_naval_yard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Kaiser
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3_3
		name = kaiser_shipyards_upgrade_3_3
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			brooklyn_naval_yards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				brooklyn_naval_yards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			brooklyn_naval_yards_merge_levels_and_funds = yes
			custom_effect_tooltip = brooklyn_naval_yards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kaiser_Brooklyn
			set_mio_flag = USA_MIO_merge_once
			USA_brooklyn_naval_yards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3_4
		name = kaiser_shipyards_upgrade_3_4
		icon = GFX_icon_electric_boat_MIO

		available = {
			electric_boat_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			electric_boat_merge_levels_and_funds = yes
			custom_effect_tooltip = electric_boat_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kaiser_EB
			set_mio_flag = USA_MIO_merge_once
			USA_electric_boat_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3_5
		name = kaiser_shipyards_upgrade_3_5
		icon = GFX_icon_higgins_MIO

		available = {
			higgins_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			higgins_merge_levels_and_funds = yes
			custom_effect_tooltip = higgins_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kaiser_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_higgins_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = kaiser_shipyards_upgrade_3_6
		name = kaiser_shipyards_upgrade_3_6
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			mare_island_naval_shipyard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				mare_island_naval_shipyard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			mare_island_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = mare_island_naval_shipyard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kiaser_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_mare_island_naval_shipyard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}

USA_brooklyn_naval_yards_organisation = { #New York Shipbuilding
	name = USA_brooklyn_naval_yards
	icon = GFX_idea_USA_brooklyn_naval_yards

	allowed = { is_american_tag = yes }
	available = {
		358 = { is_owned_and_controlled_by = FROM } #New York City
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = brooklyn_naval_yards_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1
		name = brooklyn_naval_yards_upgrade_1
		icon = GFX_military_industrial_organization_capital_ship

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { brooklyn_naval_yards_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { brooklyn_naval_yards_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_heavy_2 equipment_variant = "Iowa Class" creator = FROM }
					create_ship = { type = ship_hull_heavy_2 equipment_variant = "Iowa Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_heavy_2 equipment_variant = "Iowa Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2
		name = brooklyn_naval_yards_upgrade_2
		icon = GFX_generic_mio_trait_icon_naval_torpedo_damage_reduction_factor

		mutually_exclusive = { brooklyn_naval_yards_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			naval_torpedo_damage_reduction_factor = 0.15
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3
		name = brooklyn_naval_yards_upgrade_3
		icon = GFX_generic_mio_trait_icon_max_strength

		position = { x = 3 y = 0 }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_4
		name = brooklyn_naval_yards_upgrade_4
		icon = GFX_KR_generic_mio_trait_icon_naval_torpedo_enemy_critical_chance_factor

		mutually_exclusive = { brooklyn_naval_yards_upgrade_5 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.25
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_5
		name = brooklyn_naval_yards_upgrade_5
		icon = GFX_KR_generic_mio_trait_icon_naval_torpedo_enemy_critical_chance_factor

		mutually_exclusive = { brooklyn_naval_yards_upgrade_4 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.35
			naval_torpedo_damage_reduction_factor = -0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_1
		name = brooklyn_naval_yards_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { brooklyn_naval_yards_upgrade_3 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_2
		name = brooklyn_naval_yards_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { brooklyn_naval_yards_upgrade_3 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_3
		name = brooklyn_naval_yards_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_1_4
		name = brooklyn_naval_yards_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_funds

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_1
		name = brooklyn_naval_yards_upgrade_2_1
		icon = GFX_KR_generic_mio_trait_icon_naval_weather_penalty_factor

		any_parent = { brooklyn_naval_yards_upgrade_1 brooklyn_naval_yards_upgrade_2 }
		all_parents = { brooklyn_naval_yards_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_2
		name = brooklyn_naval_yards_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { brooklyn_naval_yards_upgrade_1_1 brooklyn_naval_yards_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_3
		name = brooklyn_naval_yards_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_naval_weather_penalty_factor

		any_parent = { brooklyn_naval_yards_upgrade_4 brooklyn_naval_yards_upgrade_5 }
		all_parents = { brooklyn_naval_yards_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.1
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_4
		name = brooklyn_naval_yards_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { brooklyn_naval_yards_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_2_5
		name = brooklyn_naval_yards_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { brooklyn_naval_yards_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_orleans_civilian_factory_removed }
					add_to_variable = { new_orleans_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { new_orleans_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3_1
		name = brooklyn_naval_yards_upgrade_3_1
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			newport_news_shipbuilding_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				newport_news_shipbuilding_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			newport_news_shipbuilding_merge_levels_and_funds = yes
			custom_effect_tooltip = newport_news_shipbuilding_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Brooklyn
			set_mio_flag = USA_MIO_merge_once
			USA_newport_news_shipbuilding_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3_2
		name = brooklyn_naval_yards_upgrade_3_2
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			norfolk_naval_yard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				norfolk_naval_yard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			norfolk_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = norfolk_naval_yard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Brooklyn
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3_3
		name = brooklyn_naval_yards_upgrade_3_3
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			kaiser_shipyards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				kaiser_shipyards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			kaiser_shipyards_merge_levels_and_funds = yes
			custom_effect_tooltip = kaiser_shipyards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kaiser_Brooklyn
			set_mio_flag = USA_MIO_merge_once
			USA_kaiser_shipyards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3_4
		name = brooklyn_naval_yards_upgrade_3_4
		icon = GFX_icon_electric_boat_MIO

		available = {
			electric_boat_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			electric_boat_merge_levels_and_funds = yes
			custom_effect_tooltip = electric_boat_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Brooklyn_EB
			set_mio_flag = USA_MIO_merge_once
			USA_electric_boat_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3_5
		name = brooklyn_naval_yards_upgrade_3_5
		icon = GFX_icon_higgins_MIO

		available = {
			higgins_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			higgins_merge_levels_and_funds = yes
			custom_effect_tooltip = higgins_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Brooklyn_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_higgins_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = brooklyn_naval_yards_upgrade_3_6
		name = brooklyn_naval_yards_upgrade_3_6
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			mare_island_naval_shipyard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				mare_island_naval_shipyard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			mare_island_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = mare_island_naval_shipyard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Brooklyn_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_mare_island_naval_shipyard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_electric_boat_organisation = { #Electric Boat
	name = USA_electric_boat
	icon = GFX_idea_electric_boat_company

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Connecticut
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		submarine
	}

	research_categories = {
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_submarine_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = electric_boat_upgrade_1
		name = electric_boat_upgrade_1
		icon = GFX_military_industrial_organization_submarine

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { electric_boat_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			sub_visibility = -0.05
		}

		on_complete = {
			FROM = {
				if = {
					limit = { electric_boat_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
					create_ship = { type = ship_hull_submarine_2 equipment_variant = "Porpoise Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = electric_boat_upgrade_2
		name = electric_boat_upgrade_2
		icon = GFX_generic_mio_trait_icon_sub_visibility

		mutually_exclusive = { electric_boat_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			sub_visibility = -0.15
			torpedo_attack = -0.15
			surface_detection = -0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_3
		name = electric_boat_upgrade_3
		icon = GFX_generic_mio_trait_icon_naval_speed

		position = { x = 2 y = 0 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_4
		name = electric_boat_upgrade_4
		icon = GFX_generic_mio_trait_icon_naval_speed

		position = { x = 4 y = 0 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_5
		name = electric_boat_upgrade_5
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { electric_boat_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			mines_planting = 0.2
		}
	}

	trait = {
		token = electric_boat_upgrade_6
		name = electric_boat_upgrade_6
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { electric_boat_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			mines_planting = 0.4
			naval_speed = -0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_1_1
		name = electric_boat_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { electric_boat_upgrade_3 electric_boat_upgrade_4 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = electric_boat_upgrade_1_2
		name = electric_boat_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = electric_boat_upgrade_1_3
		name = electric_boat_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_resources

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.3
		}
	}

	trait = {
		token = electric_boat_upgrade_2_1
		name = electric_boat_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		any_parent = { electric_boat_upgrade_1 electric_boat_upgrade_2 }
		all_parents = { electric_boat_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			torpedo_attack = 0.075
		}
	}

	trait = {
		token = electric_boat_upgrade_2_2
		name = electric_boat_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_surface_detection

		all_parents = { electric_boat_upgrade_1_1 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			surface_detection = 0.15
		}
	}

	trait = {
		token = electric_boat_upgrade_2_3
		name = electric_boat_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		any_parent = { electric_boat_upgrade_5 electric_boat_upgrade_6 }
		all_parents = { electric_boat_upgrade_1_1 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			torpedo_attack = 0.075
		}
	}

	trait = {
		token = electric_boat_upgrade_2_4
		name = electric_boat_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { electric_boat_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = electric_boat_upgrade_2_5
		name = electric_boat_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { electric_boat_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = electric_boat_upgrade_3_1
		name = electric_boat_upgrade_3_1
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			newport_news_shipbuilding_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				newport_news_shipbuilding_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			newport_news_shipbuilding_merge_levels_and_funds = yes
			custom_effect_tooltip = newport_news_shipbuilding_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_EB
			set_mio_flag = USA_MIO_merge_once
			USA_newport_news_shipbuilding_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = electric_boat_upgrade_3_2
		name = electric_boat_upgrade_3_2
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			norfolk_naval_yard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				norfolk_naval_yard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			norfolk_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = norfolk_naval_yard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_EB
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = electric_boat_upgrade_3_3
		name = electric_boat_upgrade_3_3
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			kaiser_shipyards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				kaiser_shipyards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			kaiser_shipyards_merge_levels_and_funds = yes
			custom_effect_tooltip = kaiser_shipyards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kaiser_EB
			set_mio_flag = USA_MIO_merge_once
			USA_kaiser_shipyards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = electric_boat_upgrade_3_4
		name = electric_boat_upgrade_3_4
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			brooklyn_naval_yards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			brooklyn_naval_yards_merge_levels_and_funds = yes
			custom_effect_tooltip = brooklyn_naval_yards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Brooklyn_EB
			set_mio_flag = USA_MIO_merge_once
			USA_brooklyn_naval_yards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = electric_boat_upgrade_3_5
		name = electric_boat_upgrade_3_5
		icon = GFX_icon_higgins_MIO

		available = {
			higgins_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			higgins_merge_levels_and_funds = yes
			custom_effect_tooltip = higgins_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_EB_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_higgins_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = electric_boat_upgrade_3_6
		name = electric_boat_upgrade_3_6
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			mare_island_naval_shipyard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				mare_island_naval_shipyard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			mare_island_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = mare_island_naval_shipyard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_EB_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_mare_island_naval_shipyard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_higgins_organisation = { #Higgins
	name = USA_higgins
	icon = GFX_idea_USA_higgins

	allowed = { is_american_tag = yes }
	available = {
		371 = { is_owned_and_controlled_by = FROM } #New Orleans
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
	}

	research_categories = {
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_destroyer_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = higgins_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = higgins_upgrade_1
		name = higgins_upgrade_1
		icon = GFX_generic_mio_trait_icon_surface_detection

		mutually_exclusive = { higgins_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			hg_attack = -0.3
			lg_attack = -0.3
		}
	}

	trait = {
		token = higgins_upgrade_2
		name = higgins_upgrade_2
		icon = GFX_generic_mio_trait_icon_surface_visibility

		mutually_exclusive = { higgins_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			surface_visibility = -0.25
			hg_attack = -0.3
			lg_attack = -0.3
		}
	}

	trait = {
		token = higgins_upgrade_3
		name = higgins_upgrade_3
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 2 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			torpedo_attack = -0.1
		}
	}

	trait = {
		token = higgins_upgrade_4
		name = higgins_upgrade_4
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 3 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			torpedo_attack = -0.1
		}
	}

	trait = {
		token = higgins_upgrade_5
		name = higgins_upgrade_5
		icon = GFX_generic_mio_trait_icon_surface_detection

		position = { x = 4 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			torpedo_attack = -0.1
		}
	}

	trait = {
		token = higgins_upgrade_6
		name = higgins_upgrade_6
		icon = GFX_generic_mio_trait_icon_naval_speed

		mutually_exclusive = { higgins_upgrade_7 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			naval_speed = 0.1
			hg_armor_piercing = -0.3
			lg_armor_piercing = -0.3
		}
	}

	trait = {
		token = higgins_upgrade_7
		name = higgins_upgrade_7
		icon = GFX_military_industrial_organization_destroyer

		available = {
			FROM = {
				any_controlled_state = {
					is_coastal = yes
					is_fully_controlled_by = FROM
				}
			}
		}

		mutually_exclusive = { higgins_upgrade_6 }

		position = { x = 6 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { higgins_stockpile_trait_unlocked = yes }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
				}
				else = {
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
					create_ship = { type = ship_hull_light_2 equipment_variant = "Rodgers/Bagley Class" creator = FROM }
				}
			}
		}
	}

	trait = {
		token = higgins_upgrade_8
		name = higgins_upgrade_8
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { higgins_upgrade_9 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_loses_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = -1 } }
			}
		}
	}

	trait = {
		token = higgins_upgrade_9
		name = higgins_upgrade_9
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { higgins_upgrade_8 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_gains_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = 1 } }
			}
		}
	}

	trait = {
		token = higgins_upgrade_1_1
		name = higgins_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_naval_speed

		any_parent = { higgins_upgrade_1 higgins_upgrade_2 }
		all_parents = { higgins_upgrade_3 higgins_upgrade_4 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = higgins_upgrade_1_2
		name = higgins_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_naval_speed

		any_parent = { higgins_upgrade_6 higgins_upgrade_7 }
		all_parents = { higgins_upgrade_4 higgins_upgrade_5 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = higgins_upgrade_1_3
		name = higgins_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = higgins_upgrade_1_4
		name = higgins_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_surface_detection

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		equipment_bonus = {
			surface_detection = 0.2
		}
	}

	trait = {
		token = higgins_upgrade_2_1
		name = higgins_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_surface_detection

		all_parents = { higgins_upgrade_1_1 higgins_upgrade_4 higgins_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			naval_speed = 0.1
		}
	}

	trait = {
		token = higgins_upgrade_2_2
		name = higgins_upgrade_2_2
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			797 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			371 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { higgins_upgrade_2_3 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				797 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				371 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = san_francisco_dockyards_removed }
					add_to_variable = { san_francisco_dockyards_removed = 1 }
				}
				else = {
					set_variable = { san_francisco_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = higgins_upgrade_2_3
		name = higgins_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			371 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { higgins_upgrade_2_2 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				371 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = higgins_upgrade_3_1
		name = higgins_upgrade_3_1
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			newport_news_shipbuilding_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				newport_news_shipbuilding_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			newport_news_shipbuilding_merge_levels_and_funds = yes
			custom_effect_tooltip = newport_news_shipbuilding_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_newport_news_shipbuilding_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = higgins_upgrade_3_2
		name = higgins_upgrade_3_2
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			norfolk_naval_yard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				norfolk_naval_yard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			norfolk_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = norfolk_naval_yard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = higgins_upgrade_3_3
		name = higgins_upgrade_3_3
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			kaiser_shipyards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				kaiser_shipyards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			kaiser_shipyards_merge_levels_and_funds = yes
			custom_effect_tooltip = kaiser_shipyards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kaiser_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_kaiser_shipyards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = higgins_upgrade_3_4
		name = higgins_upgrade_3_4
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			brooklyn_naval_yards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			brooklyn_naval_yards_merge_levels_and_funds = yes
			custom_effect_tooltip = brooklyn_naval_yards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Brooklyn_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_brooklyn_naval_yards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = higgins_upgrade_3_5
		name = higgins_upgrade_3_5
		icon = GFX_icon_electric_boat_MIO

		available = {
			electric_boat_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			electric_boat_merge_levels_and_funds = yes
			custom_effect_tooltip = electric_boat_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_EB_Higgins
			set_mio_flag = USA_MIO_merge_once
			USA_electric_boat_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = higgins_upgrade_3_6
		name = higgins_upgrade_3_6
		icon = GFX_icon_mare_island_naval_shipyard_MIO

		available = {
			mare_island_naval_shipyard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				mare_island_naval_shipyard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_capacity_factor = 0.1
		}

		on_complete = {
			mare_island_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = mare_island_naval_shipyard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Higgins_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_mare_island_naval_shipyard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_mare_island_naval_shipyard_organisation = { #Mare Island Naval Shipyard
	name = USA_mare_island_naval_shipyard
	icon = GFX_idea_USA_mare_island_naval_shipyard

	allowed = { is_american_tag = yes }
	available = {
		797 = { is_owned_and_controlled_by = FROM } #San Francisco
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		mio_cat_eq_all_carrier
		mio_cat_eq_all_battleship
		mio_cat_eq_all_cruiser
		mio_cat_eq_all_destroyer
		submarine
		convoy_1
	}

	research_categories = {
		mio_cat_tech_all_carrier_and_modules
		mio_cat_tech_all_capital_ship_and_modules
		mio_cat_tech_all_destroyer_and_modules
		mio_cat_tech_all_cruiser_and_modules
		mio_cat_tech_all_submarine_and_modules
		tp_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = mare_island_naval_shipyard_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1
		name = mare_island_naval_shipyard_upgrade_1
		icon = GFX_military_industrial_organization_convoy_1

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { mare_island_naval_shipyard_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = convoy
						amount = 500
						producer = FROM
					}
				}
				else = {
					add_equipment_to_stockpile = {
						type = convoy
						amount = 250
						producer = FROM
					}
				}
			}
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2
		name = mare_island_naval_shipyard_upgrade_2
		icon = GFX_generic_mio_trait_icon_production_capacity

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_1 }

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_all_destroyer }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3
		name = mare_island_naval_shipyard_upgrade_3
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		position = { x = 3 y = 0 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_4
		name = mare_island_naval_shipyard_upgrade_4
		icon = GFX_generic_mio_trait_icon_production_capacity

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_5 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_5
		name = mare_island_naval_shipyard_upgrade_5
		icon = GFX_generic_mio_trait_icon_production_capacity

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_4 }

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_all_cruiser }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_1
		name = mare_island_naval_shipyard_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mare_island_naval_shipyard_upgrade_3 }

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_2
		name = mare_island_naval_shipyard_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mare_island_naval_shipyard_upgrade_3 }

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_1_1 }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.1
			production_resource_need_factor = 0.5
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_3
		name = mare_island_naval_shipyard_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_naval_base

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_naval_mio_equipment_tt
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_1_4
		name = mare_island_naval_shipyard_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_production_capacity

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_1
		name = mare_island_naval_shipyard_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { mare_island_naval_shipyard_upgrade_1 mare_island_naval_shipyard_upgrade_2 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_2
		name = mare_island_naval_shipyard_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { mare_island_naval_shipyard_upgrade_1 mare_island_naval_shipyard_upgrade_2 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 1 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_3
		name = mare_island_naval_shipyard_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 3 y = 2 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_4
		name = mare_island_naval_shipyard_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { mare_island_naval_shipyard_upgrade_4 mare_island_naval_shipyard_upgrade_5 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 5 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_5
		name = mare_island_naval_shipyard_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_production_capacity

		any_parent = { mare_island_naval_shipyard_upgrade_4 mare_island_naval_shipyard_upgrade_5 }
		any_parent = { mare_island_naval_shipyard_upgrade_1_1 mare_island_naval_shipyard_upgrade_1_2 }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_capacity_factor = 0.05
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_6
		name = mare_island_naval_shipyard_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_dockyard

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				dockyard > 0
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
					if = {
						limit = { dockyard > 0 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_dockyards_removed }
					add_to_variable = { new_york_city_dockyards_removed = 1 }
				}
				else = {
					set_variable = { new_york_city_dockyards_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_2_7
		name = mare_island_naval_shipyard_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			371 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			797 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { mare_island_naval_shipyard_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				371 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				797 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_orleans_civilian_factory_removed }
					add_to_variable = { new_orleans_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { new_orleans_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3_1
		name = mare_island_naval_shipyard_upgrade_3_1
		icon = GFX_icon_newport_news_shipbuilding_MIO

		available = {
			newport_news_shipbuilding_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Newport_news_shipbuilding_not_merged_yet
				newport_news_shipbuilding_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			hg_attack = 0.1
			lg_attack = 0.1
		}

		on_complete = {
			newport_news_shipbuilding_merge_levels_and_funds = yes
			custom_effect_tooltip = newport_news_shipbuilding_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Newport_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_newport_news_shipbuilding_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3_2
		name = mare_island_naval_shipyard_upgrade_3_2
		icon = GFX_icon_norfolk_naval_yard_MIO

		available = {
			norfolk_naval_yard_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Norfolk_naval_yard_not_merged_yet
				norfolk_naval_yard_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_range = 0.1
		}

		on_complete = {
			norfolk_naval_shipyard_merge_levels_and_funds = yes
			custom_effect_tooltip = norfolk_naval_yard_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Norfolk_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3_3
		name = mare_island_naval_shipyard_upgrade_3_3
		icon = GFX_icon_kaiser_shipyards_MIO

		available = {
			kaiser_shipyards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Kaiser_shipyards_not_merged_yet
				kaiser_shipyards_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			kaiser_shipyards_merge_levels_and_funds = yes
			custom_effect_tooltip = kaiser_shipyards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Kiaser_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_kaiser_shipyards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3_4
		name = mare_island_naval_shipyard_upgrade_3_4
		icon = GFX_icon_brooklyn_naval_yards_MIO

		available = {
			brooklyn_naval_yards_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Brooklyn_naval_yards_not_merged_yet
				electric_boat_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			max_strength = 0.1
		}

		on_complete = {
			brooklyn_naval_yards_merge_levels_and_funds = yes
			custom_effect_tooltip = brooklyn_naval_yards_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Brooklyn_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_brooklyn_naval_yards_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3_5
		name = mare_island_naval_shipyard_upgrade_3_5
		icon = GFX_icon_electric_boat_MIO

		available = {
			electric_boat_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Electric_boat_not_merged_yet
				higgins_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			torpedo_attack = 0.1
		}

		on_complete = {
			electric_boat_merge_levels_and_funds = yes
			custom_effect_tooltip = electric_boat_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_EB_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_electric_boat_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = mare_island_naval_shipyard_upgrade_3_6
		name = mare_island_naval_shipyard_upgrade_3_6
		icon = GFX_icon_higgins_MIO

		available = {
			higgins_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Mare_island_naval_shipyard_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Higgins_not_merged_yet
				higgins_available = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			surface_detection = 0.1
		}

		on_complete = {
			higgins_merge_levels_and_funds = yes
			custom_effect_tooltip = higgins_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Higgins_Mare
			set_mio_flag = USA_MIO_merge_once
			USA_higgins_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}

#####################
### Airplane MIOs ###
#####################
USA_bell_organisation = { #Bell
	name = USA_bell
	icon = GFX_idea_bell

	allowed = { is_american_tag = yes }
	available = {
		930 = { is_owned_and_controlled_by = FROM } #Buffalo
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = bell_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = bell_upgrade_1
		name = bell_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 0 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -0.1
		}
	}

	trait = {
		token = bell_upgrade_2
		name = bell_upgrade_2
		icon = GFX_generic_mio_department_icon_plane_tactical_bomber

		mutually_exclusive = { bell_upgrade_3 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.04
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}

		on_complete = {
			FROM = {
				if = {
					limit = { bell_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "B-18 Tactical Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = medium_plane_airframe_1
							amount = 200
							variant_name = "B-18 Tactical Bomber"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "B-18 Tactical Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = medium_plane_airframe_1
							amount = 100
							variant_name = "B-18 Tactical Bomber"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = bell_upgrade_3
		name = bell_upgrade_3
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		available = {
			FROM = { has_air_experience > 50 }
		}

		mutually_exclusive = { bell_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.04
			air_agility = 0.1
		}

		on_complete = {
			FROM = { air_experience = -50 }
		}
	}

	trait = {
		token = bell_upgrade_4
		name = bell_upgrade_4
		icon = GFX_KR_generic_mio_trait_icon_funds

		position = { x = 6 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -0.1
		}
	}

	trait = {
		token = bell_upgrade_1_1
		name = bell_upgrade_1_1
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		all_parents = { bell_upgrade_1 }
		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.15
		}
	}

	trait = {
		token = bell_upgrade_1_2
		name = bell_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		all_parents = { bell_upgrade_4 }
		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.15
		}
	}

	trait = {
		token = bell_upgrade_1_3
		name = bell_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = bell_upgrade_1_4
		name = bell_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = bell_upgrade_2_1
		name = bell_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { bell_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		production_bonus = {
			production_resource_need_factor = 0.25
		}
	}

	trait = {
		token = bell_upgrade_2_2
		name = bell_upgrade_2_2
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		mutually_exclusive = { bell_upgrade_2_3 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.04
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}
	}

	trait = {
		token = bell_upgrade_2_3
		name = bell_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		available = {
			FROM = { has_air_experience > 50 }
		}

		any_parent = { bell_upgrade_2 bell_upgrade_3 }

		mutually_exclusive = { bell_upgrade_2_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.04
		}

		on_complete = {
			FROM = { air_experience = -50 }
		}
	}

	trait = {
		token = bell_upgrade_2_4
		name = bell_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { bell_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.02
		}

		production_bonus = {
			production_efficiency_gain_factor = -0.2
		}
	}

	trait = {
		token = bell_upgrade_2_5
		name = bell_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { bell_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = bell_upgrade_2_6
		name = bell_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { bell_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = bell_upgrade_3_1
		name = bell_upgrade_3_1
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Consolidated
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_2
		name = bell_upgrade_3_2
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Grumman
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_3
		name = bell_upgrade_3_3
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Lockheed
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_4
		name = bell_upgrade_3_4
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_5
		name = bell_upgrade_3_5
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_CW
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_6
		name = bell_upgrade_3_6
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_7
		name = bell_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = bell_upgrade_3_8
		name = bell_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_consolidated_organisation = { #Consolidated
	name = USA_consolidated
	icon = GFX_idea_consolidated_aircraft

	allowed = { is_american_tag = yes }
	available = {
		930 = { is_owned_and_controlled_by = FROM } #Buffalo
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_general_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = consolidated_upgrade_1
		name = consolidated_upgrade_1
		icon = GFX_generic_mio_trait_icon_air_superiority

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_superiority = 0.1
			air_range = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_2
		name = consolidated_upgrade_2
		icon = GFX_generic_mio_department_icon_plane_scout

		mutually_exclusive = { consolidated_upgrade_3 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { NOT = { has_tech = photo_reconnaisance } }
					set_technology = { photo_reconnaisance = 1 }
				}
				create_equipment_variant = {
					name = "A-20 F3A Havoc"
					type = medium_plane_scout_plane_airframe_1
					show_position = no
					modules = {
						fixed_main_weapon_slot = recon_camera
						engine_type_slot = engine_2_2x
						special_type_slot_1 = lmg_defense_turret
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { consolidated_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "A-20 F3A Havoc Scout"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = medium_plane_scout_plane_airframe_1
							amount = 200
							variant_name = "A-20 F3A Havoc"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "A-20 F3A Havoc Scout"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = medium_plane_scout_plane_airframe_1
							amount = 100
							variant_name = "A-20 F3A Havoc"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = consolidated_upgrade_3
		name = consolidated_upgrade_3
		icon = GFX_generic_mio_trait_icon_air_attack

		mutually_exclusive = { consolidated_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			air_attack = 0.1
			reliability = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_4
		name = consolidated_upgrade_4
		icon = GFX_generic_mio_trait_icon_air_agility

		position = { x = 6 y = 0 }

		equipment_bonus = {
			air_agility = 0.1
			maximum_speed = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_1
		name = consolidated_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { consolidated_upgrade_1 }
		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_2
		name = consolidated_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		mutually_exclusive = { consolidated_upgrade_1_3 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_3
		name = consolidated_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "700"
				}
				check_variable = { funds > 700 }
			}
			check_variable = { funds > 700 }
		}

		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		mutually_exclusive = { consolidated_upgrade_1_2 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_ground_attack = 0.2
		}

		on_complete = {
			add_mio_funds = -700
		}
	}

	trait = {
		token = consolidated_upgrade_1_4
		name = consolidated_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_mines

		all_parents = { consolidated_upgrade_4 }
		any_parent = { consolidated_upgrade_2 consolidated_upgrade_3 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			mines_planting = 0.1
			mines_sweeping = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_1_5
		name = consolidated_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = consolidated_upgrade_1_6
		name = consolidated_upgrade_1_6
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = consolidated_upgrade_2_1
		name = consolidated_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { consolidated_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_defence = 0.1
			thrust = 0.1
			weight = -0.1
		}
	}

	trait = {
		token = consolidated_upgrade_2_2
		name = consolidated_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		all_parents = { consolidated_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			naval_strike_attack = 0.1
			naval_strike_targetting = 0.1
			surface_detection = 0.1
		}
	}

	trait = {
		token = consolidated_upgrade_2_3
		name = consolidated_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { consolidated_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = consolidated_upgrade_2_4
		name = consolidated_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			930 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { consolidated_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				930 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = consolidated_upgrade_3_1
		name = consolidated_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Consolidated
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_2
		name = consolidated_upgrade_3_2
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Grumman
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_3
		name = consolidated_upgrade_3_3
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Lockheed
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_4
		name = consolidated_upgrade_3_4
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_5
		name = consolidated_upgrade_3_5
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_CW
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_6
		name = consolidated_upgrade_3_6
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_7
		name = consolidated_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = consolidated_upgrade_3_8
		name = consolidated_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_grumman_organisation = { #Grumman
	name = USA_grumman
	icon = GFX_idea_grumman

	allowed = { is_american_tag = yes }
	available = {
		358 = { is_owned_and_controlled_by = FROM } #Buffalo
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_naval_bomber_airframe
		medium_plane_airframe
		large_plane_maritime_patrol_plane_airframe
		cv_small_plane_naval_bomber_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_naval_bomber_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = generic_mio_initial_trait_naval_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = grumman_upgrade_1
		name = grumman_upgrade_1
		icon = GFX_generic_mio_department_icon_plane_naval_bomber

		mutually_exclusive = { grumman_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				create_equipment_variant = {
					name = "TBD-1 Devastator"
					type = small_plane_naval_bomber_airframe_1
					show_position = no
					modules = {
						fixed_main_weapon_slot = torpedo_mounting
						engine_type_slot = engine_2_2x
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { grumman_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "TBD-1 Devastator Naval Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_naval_bomber_airframe_1
							amount = 200
							variant_name = "TBD-1 Devastator"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "TBD-1 Devastator Naval Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_naval_bomber_airframe_1
							amount = 100
							variant_name = "TBD-1 Devastator"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = grumman_upgrade_2
		name = grumman_upgrade_2
		icon = GFX_generic_mio_trait_icon_surface_detection

		mutually_exclusive = { grumman_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			surface_detection = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_3
		name = grumman_upgrade_3
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		position = { x = 2 y = 0 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_4
		name = grumman_upgrade_4
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		position = { x = 4 y = 0 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_5
		name = grumman_upgrade_5
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { grumman_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			mines_planting = 0.2
			mines_sweeping = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_6
		name = grumman_upgrade_6
		icon = GFX_generic_mio_trait_icon_mines

		mutually_exclusive = { grumman_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			mines_planting = 0.1
			mines_sweeping = 0.2
		}
	}

	trait = {
		token = grumman_upgrade_1_1
		name = grumman_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_surface_detection

		any_parent = { grumman_upgrade_1 grumman_upgrade_2 }
		all_parents = { grumman_upgrade_3 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			surface_detection = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_1_2
		name = grumman_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_sub_detection

		any_parent = { grumman_upgrade_5 grumman_upgrade_6 }
		all_parents = { grumman_upgrade_4 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			surface_detection = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_1_3
		name = grumman_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = grumman_upgrade_1_4
		name = grumman_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_resources

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.25
		}
	}

	trait = {
		token = grumman_upgrade_2_1
		name = grumman_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_naval_strike_targetting

		all_parents = { grumman_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			naval_strike_targetting = 0.2
		}
	}

	trait = {
		token = grumman_upgrade_2_2
		name = grumman_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { grumman_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = grumman_upgrade_2_3
		name = grumman_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { grumman_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = grumman_upgrade_2_4
		name = grumman_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			358 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { grumman_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				358 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = grumman_upgrade_3_1
		name = grumman_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Grumman
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_2
		name = grumman_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Grumman
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_3
		name = grumman_upgrade_3_3
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Lockheed
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_4
		name = grumman_upgrade_3_4
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_5
		name = grumman_upgrade_3_5
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_CW
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_6
		name = grumman_upgrade_3_6
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_7
		name = grumman_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = grumman_upgrade_3_8
		name = grumman_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_lockheed_organisation = { #Lockheed
	name = USA_lockheed
	icon = GFX_idea_lockheed

	allowed = { is_american_tag = yes }
	available = {
		798 = { is_owned_and_controlled_by = FROM } #Los Angeles
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_fighter_airframe
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = lockheed_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_1
		name = lockheed_upgrade_1
		icon = GFX_generic_mio_department_icon_plane_fighter

		mutually_exclusive = { lockheed_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_superiority = 0.05
		}

		on_complete = {
			FROM = {
				if = {
					limit = { lockheed_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "P-36A Fighter"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_airframe_1
							amount = 200
							variant_name = "P-36A"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "P-36A Fighter"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_airframe_1
							amount = 100
							variant_name = "P-36A"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = lockheed_upgrade_2
		name = lockheed_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_superiority

		mutually_exclusive = { lockheed_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			air_superiority = 0.15
			weight = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_1_1
		name = lockheed_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_weight

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			weight = -0.3
		}
	}

	trait = {
		token = lockheed_upgrade_1_2
		name = lockheed_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_1_3
		name = lockheed_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_agility

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_1_4
		name = lockheed_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_1_5
		name = lockheed_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = lockheed_upgrade_1_6
		name = lockheed_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = lockheed_upgrade_2_1
		name = lockheed_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_air_superiority

		any_parent = { lockheed_upgrade_1 lockheed_upgrade_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_superiority = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_2_2
		name = lockheed_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_air_attack

		all_parents = { lockheed_upgrade_1_2 }

		mutually_exclusive = { lockheed_upgrade_2_3 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			air_attack = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_2_3
		name = lockheed_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_air_attack

		all_parents = { lockheed_upgrade_1_2 }

		mutually_exclusive = { lockheed_upgrade_2_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			air_attack = 0.1
			weight = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_2_4
		name = lockheed_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { lockheed_upgrade_1_3 }

		mutually_exclusive = { lockheed_upgrade_2_5 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_agility = 0.05
		}
	}

	trait = {
		token = lockheed_upgrade_2_5
		name = lockheed_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { lockheed_upgrade_1_3 }

		mutually_exclusive = { lockheed_upgrade_2_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_agility = 0.1
			weight = 0.2
		}
	}

	trait = {
		token = lockheed_upgrade_2_6
		name = lockheed_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			930 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { lockheed_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				930 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = buffalo_military_factory_removed }
					add_to_variable = { buffalo_military_factory_removed = 1 }
				}
				else = {
					set_variable = { buffalo_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = lockheed_upgrade_2_7
		name = lockheed_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			358 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { lockheed_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				358 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = new_york_city_civilian_factories_removed }
					add_to_variable = { new_york_city_civilian_factories_removed = 2 }
				}
				else = {
					set_variable = { new_york_city_civilian_factories_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = lockheed_upgrade_3_1
		name = lockheed_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Lockheed
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_2
		name = lockheed_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Lockheed
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_3
		name = lockheed_upgrade_3_3
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Lockheed
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_4
		name = lockheed_upgrade_3_4
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_norfolk_naval_yard_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_5
		name = lockheed_upgrade_3_5
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_CW
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_6
		name = lockheed_upgrade_3_6
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_7
		name = lockheed_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = lockheed_upgrade_3_8
		name = lockheed_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_north_american_aviation_organisation = { #North American Aviation
	name = USA_north_american_aviation
	icon = GFX_idea_north_american_aviation

	allowed = { is_american_tag = yes }
	available = {
		361 = { is_owned_and_controlled_by = FROM } #Maryland
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = north_american_aviation_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1
		name = north_american_aviation_upgrade_1
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		mutually_exclusive = { north_american_aviation_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_range = 0.05
		}

		on_complete = {
			FROM = {
				if = {
					limit = { NOT = { has_tech = iw_large_airframe } }
					set_technology = { iw_large_airframe = 1 }
				}
				create_equipment_variant = {
					type = large_plane_airframe_0
					name = "B-17"
					show_position = no
					modules = {
						fixed_main_weapon_slot = large_bomb_bay
						fixed_auxiliary_weapon_slot_1 = large_bomb_bay
						fixed_auxiliary_weapon_slot_2 = large_bomb_bay
						fixed_auxiliary_weapon_slot_3 = large_bomb_bay
						engine_type_slot = engine_2_6x
					}
				}
				if = {
					limit = { north_american_aviation_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = large_plane_airframe_0
							amount = 200
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = large_plane_airframe_0
							amount = 100
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2
		name = north_american_aviation_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		mutually_exclusive = { north_american_aviation_upgrade_1 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			air_range = 0.1
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = north_american_aviation_upgrade_normal
		name = north_american_aviation_upgrade_normal
		icon = GFX_generic_mio_department_icon_plane_heavy_line_efficiency

		visible = {
			NOT = {
				has_mio_flag = north_american_aviation_normal_upgrades
				has_mio_flag = north_american_aviation_improved_upgrades
			}
		}

		position = { x = 3 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = north_american_aviation_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_improved
		name = north_american_aviation_upgrade_improved
		icon = GFX_generic_mio_department_icon_plane_heavy_technology

		visible = {
			NOT = {
				has_mio_flag = north_american_aviation_normal_upgrades
				has_mio_flag = north_american_aviation_improved_upgrades
			}
		}

		position = { x = 4 y = 0 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_mils
			set_mio_flag = north_american_aviation_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3
		name = north_american_aviation_upgrade_3
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { north_american_aviation_upgrade_4 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_loses_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = -1 } }
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_4
		name = north_american_aviation_upgrade_4
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { north_american_aviation_upgrade_3 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_gains_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = 1 } }
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_1
		name = north_american_aviation_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_defence

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		mutually_exclusive = { north_american_aviation_upgrade_1_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_defence = 0.05
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_2
		name = north_american_aviation_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_defence

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		mutually_exclusive = { north_american_aviation_upgrade_1_1 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			air_defence = 0.1
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_3
		name = north_american_aviation_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_4
		name = north_american_aviation_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_reliability

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1 north_american_aviation_upgrade_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_5
		name = north_american_aviation_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_6
		name = north_american_aviation_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_air_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { air_experience = 50 }
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_1
		name = north_american_aviation_upgrade_2_1
		icon = GFX_KR_generic_mio_trait_icon_thrust

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1_1 north_american_aviation_upgrade_1_2 }

		mutually_exclusive = { north_american_aviation_upgrade_2_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			thrust = 0.05
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_2
		name = north_american_aviation_upgrade_2_2
		icon = GFX_KR_generic_mio_trait_icon_thrust

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		any_parent = { north_american_aviation_upgrade_1_1 north_american_aviation_upgrade_1_2 }

		mutually_exclusive = { north_american_aviation_upgrade_2_1 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			thrust = 0.1
		}

		production_bonus = {
			production_resource_need_factor = 0.2
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_3
		name = north_american_aviation_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		all_parents = { north_american_aviation_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_4
		name = north_american_aviation_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		all_parents = { north_american_aviation_upgrade_1_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_5
		name = north_american_aviation_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_air_range

		visible = { NOT = { has_mio_flag = north_american_aviation_improved_upgrades } }

		all_parents = { north_american_aviation_upgrade_1_3 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_range = 0.1
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_6
		name = north_american_aviation_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { north_american_aviation_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_7
		name = north_american_aviation_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			930 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { north_american_aviation_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				930 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = buffalo_civilian_factory_removed }
					add_to_variable = { buffalo_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { buffalo_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_1
		name = north_american_aviation_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_2
		name = north_american_aviation_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_3
		name = north_american_aviation_upgrade_3_3
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_4
		name = north_american_aviation_upgrade_3_4
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_NAA
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_5
		name = north_american_aviation_upgrade_3_5
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_CW
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_6
		name = north_american_aviation_upgrade_3_6
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_7
		name = north_american_aviation_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_3_8
		name = north_american_aviation_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_improved
		name = north_american_aviation_upgrade_1
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		mutually_exclusive = { north_american_aviation_upgrade_2_improved }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			air_range = 0.075
		}

		on_complete = {
			FROM = {
				if = {
					limit = { NOT = { has_tech = iw_large_airframe } }
					set_technology = { iw_large_airframe = 1 }
				}
				create_equipment_variant = {
					type = large_plane_airframe_0
					name = "B-17"
					show_position = no
					modules = {
						fixed_main_weapon_slot = large_bomb_bay
						fixed_auxiliary_weapon_slot_1 = large_bomb_bay
						fixed_auxiliary_weapon_slot_2 = large_bomb_bay
						fixed_auxiliary_weapon_slot_3 = large_bomb_bay
						engine_type_slot = engine_2_6x
					}
				}
				if = {
					limit = { north_american_aviation_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_airframe_1
							amount = 200
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_airframe_1
							amount = 100
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_improved
		name = north_american_aviation_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = north_american_aviation_normal_upgrades
					has_mio_flag = north_american_aviation_improved_upgrades
				}
			}
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		mutually_exclusive = { north_american_aviation_upgrade_1_improved }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			air_range = 0.15
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_1_improved
		name = north_american_aviation_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_defence

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_1_2_improved }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_defence = 0.075
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_2_improved
		name = north_american_aviation_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_defence

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_1_1_improved }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			air_defence = 0.15
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_3_improved
		name = north_american_aviation_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_1_4_improved
		name = north_american_aviation_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_reliability

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_improved north_american_aviation_upgrade_2_improved }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			reliability = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_1_improved
		name = north_american_aviation_upgrade_2_1
		icon = GFX_KR_generic_mio_trait_icon_thrust

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_1_improved north_american_aviation_upgrade_1_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_2_2_improved }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			thrust = 0.075
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_2_improved
		name = north_american_aviation_upgrade_2_2
		icon = GFX_KR_generic_mio_trait_icon_thrust

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		any_parent = { north_american_aviation_upgrade_1_1_improved north_american_aviation_upgrade_1_2_improved }

		mutually_exclusive = { north_american_aviation_upgrade_2_1_improved }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			thrust = 0.15
		}

		production_bonus = {
			production_resource_need_factor = 0.2
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_3_improved
		name = north_american_aviation_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		all_parents = { north_american_aviation_upgrade_1_3_improved }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_4_improved
		name = north_american_aviation_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		all_parents = { north_american_aviation_upgrade_1_3_improved }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = north_american_aviation_upgrade_2_5_improved
		name = north_american_aviation_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_air_range

		available = {
			361 = { #Maryland
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = north_american_aviation_improved_upgrades }

		all_parents = { north_american_aviation_upgrade_1_3_improved }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_range = 0.15
		}

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}
}
USA_curtiss_wright_organisation = { #Curtiss-Wright
	name = USA_curtiss_wright
	icon = GFX_idea_USA_curtiss_wright

	allowed = { is_american_tag = yes }
	available = {
		261 = { is_owned_and_controlled_by = FROM } #Ohio
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_airframe
		medium_plane_airframe
		large_plane_airframe
		cv_small_plane_airframe
		transport_plane_equipment
	}

	research_categories = {
		mio_cat_all_light_aircraft_and_modules
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = curtiss_wright_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1
		name = curtiss_wright_upgrade_1
		icon = GFX_generic_mio_department_icon_air_transport_production

		mutually_exclusive = { curtiss_wright_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { curtiss_wright_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "Curtiss C46 'Commando' Transport"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = transport_plane_equipment_1
							amount = 200
							variant_name = "Curtiss C46 'Commando'"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "Curtiss C46 'Commando' Transport"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = transport_plane_equipment_1
							amount = 100
							variant_name = "Curtiss C46 'Commando'"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2
		name = curtiss_wright_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { curtiss_wright_upgrade_1 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3
		name = curtiss_wright_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { curtiss_wright_upgrade_4 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = curtiss_wright_upgrade_4
		name = curtiss_wright_upgrade_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { curtiss_wright_upgrade_3 }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.3
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -0.3
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_1
		name = curtiss_wright_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { curtiss_wright_upgrade_1 curtiss_wright_upgrade_2 }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_2
		name = curtiss_wright_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { curtiss_wright_upgrade_1 curtiss_wright_upgrade_2 }

		mutually_exclusive = { curtiss_wright_upgrade_1_3 }

		position = { x = 1 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_3
		name = curtiss_wright_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { curtiss_wright_upgrade_1 curtiss_wright_upgrade_2 }

		mutually_exclusive = { curtiss_wright_upgrade_1_2 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_4
		name = curtiss_wright_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { curtiss_wright_upgrade_3 curtiss_wright_upgrade_4 }

		mutually_exclusive = { curtiss_wright_upgrade_1_5 }

		position = { x = 4 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_5
		name = curtiss_wright_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = {
			custom_override_tooltip = {
				tooltip = {
					localization_key = MIO_more_than_X_funds
					FUNDS = "1000"
				}
				check_variable = { funds > 1000 }
			}
		}

		any_parent = { curtiss_wright_upgrade_3 curtiss_wright_upgrade_4 }

		mutually_exclusive = { curtiss_wright_upgrade_1_4 }

		position = { x = 5 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}

		on_complete = {
			add_mio_funds = -1000
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_6
		name = curtiss_wright_upgrade_1_6
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { curtiss_wright_upgrade_3 curtiss_wright_upgrade_4 }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_7
		name = curtiss_wright_upgrade_1_7
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = curtiss_wright_upgrade_1_8
		name = curtiss_wright_upgrade_1_8
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.3
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_1
		name = curtiss_wright_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { curtiss_wright_upgrade_1_2 curtiss_wright_upgrade_1_3 }
		any_parent = { curtiss_wright_upgrade_1_4 curtiss_wright_upgrade_1_5 }

		position = { x = 2 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_2
		name = curtiss_wright_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { curtiss_wright_upgrade_1_2 curtiss_wright_upgrade_1_3 }
		any_parent = { curtiss_wright_upgrade_1_4 curtiss_wright_upgrade_1_5 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_3
		name = curtiss_wright_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			261 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { curtiss_wright_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				261 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = curtiss_wright_upgrade_2_4
		name = curtiss_wright_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			261 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { curtiss_wright_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				261 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_1
		name = curtiss_wright_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_CW
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_2
		name = curtiss_wright_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_CW
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_3
		name = curtiss_wright_upgrade_3_3
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_CW
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_4
		name = curtiss_wright_upgrade_3_4
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_CW
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_5
		name = curtiss_wright_upgrade_3_5
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_CW
			set_mio_flag = USA_MIO_merge_once
			USA_north_american_aviation_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_6
		name = curtiss_wright_upgrade_3_6
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_CW_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_7
		name = curtiss_wright_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_CW_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = curtiss_wright_upgrade_3_8
		name = curtiss_wright_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_CW_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_vought_organisation = { #Vought
	name = USA_vought
	icon = GFX_idea_USA_vought

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Conneticut
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		small_plane_cas_airframe
		medium_plane_airframe
		cv_small_plane_cas_airframe
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = vought_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = vought_upgrade_1
		name = vought_upgrade_1
		icon = GFX_generic_mio_department_icon_plane_cas

		mutually_exclusive = { vought_upgrade_2 }

		position = { x = 1 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { vought_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "A-17 CAS"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_cas_airframe_1
							amount = 200
							variant_name = "A-17"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "A-17 CAS"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = small_plane_cas_airframe_1
							amount = 100
							variant_name = "A-17"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = vought_upgrade_2
		name = vought_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		mutually_exclusive = { vought_upgrade_1 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_1_1
		name = vought_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_defence

		any_parent = { vought_upgrade_1 vought_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = vought_upgrade_1_2
		name = vought_upgrade_1_2
		icon = GFX_KR_generic_mio_trait_icon_thrust

		any_parent = { vought_upgrade_1 vought_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			thrust = 0.1
		}
	}

	trait = {
		token = vought_upgrade_1_3
		name = vought_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = vought_upgrade_1_4
		name = vought_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = vought_upgrade_2_1
		name = vought_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_1 }

		mutually_exclusive = { vought_upgrade_2_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_2
		name = vought_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_1 }

		mutually_exclusive = { vought_upgrade_2_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.2
			weight = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_3
		name = vought_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { vought_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_4
		name = vought_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_5
		name = vought_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_6
		name = vought_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		all_parents = { vought_upgrade_1_2 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = vought_upgrade_2_7
		name = vought_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { vought_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = vought_upgrade_2_8
		name = vought_upgrade_2_8
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			261 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { vought_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				261 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = ohio_civilian_factory_removed }
					add_to_variable = { ohio_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { ohio_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = vought_upgrade_3_1
		name = vought_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_2
		name = vought_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_3
		name = vought_upgrade_3_3
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_4
		name = vought_upgrade_3_4
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_5
		name = vought_upgrade_3_5
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_north_american_aviation_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_6
		name = vought_upgrade_3_6
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_CW_Vought
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_7
		name = vought_upgrade_3_7
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				boeing_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Vought_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = vought_upgrade_3_8
		name = vought_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Vought_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_boeing_organisation = { #Boeing
	name = USA_boeing
	icon = GFX_idea_boeing

	allowed = { is_american_tag = yes }
	available = {
		361 = { is_owned_and_controlled_by = FROM } #Maryland
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		large_plane_airframe
	}

	research_categories = {
		mio_cat_all_heavy_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = boeing_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = boeing_upgrade_1
		name = boeing_upgrade_1
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		mutually_exclusive = { boeing_upgrade_2 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			air_attack = 1
		}

		on_complete = {
			FROM = {
				if = {
					limit = { NOT = { has_tech = iw_large_airframe } }
					set_technology = { iw_large_airframe = 1 }
				}
				create_equipment_variant = {
					type = large_plane_airframe_0
					name = "B-17"
					show_position = no
					modules = {
						fixed_main_weapon_slot = large_bomb_bay
						fixed_auxiliary_weapon_slot_1 = large_bomb_bay
						fixed_auxiliary_weapon_slot_2 = large_bomb_bay
						fixed_auxiliary_weapon_slot_3 = large_bomb_bay
						engine_type_slot = engine_2_6x
					}
				}
				if = {
					limit = { boeing_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = large_plane_airframe_0
							amount = 200
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = large_plane_airframe_0
							amount = 100
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = boeing_upgrade_2
		name = boeing_upgrade_2
		icon = GFX_generic_mio_trait_icon_air_attack

		mutually_exclusive = { boeing_upgrade_1 }

		position = { x = 3 y = 0 }

		equipment_bonus = {
			air_attack = 2
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = boeing_upgrade_3
		name = boeing_upgrade_3
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { boeing_upgrade_4 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_SPA_loses_strength
				hidden_effect = { add_to_variable = { var = SPA_strength value = -1 } }
			}
		}
	}

	trait = {
		token = boeing_upgrade_4
		name = boeing_upgrade_4
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { boeing_upgrade_3 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_loses_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = -1 } }
			}
		}
	}

	trait = {
		token = boeing_upgrade_1_1
		name = boeing_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 0 y = 1 }

		equipment_bonus = {
			air_attack = 1
		}
	}

	trait = {
		token = boeing_upgrade_1_2
		name = boeing_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { boeing_upgrade_1 boeing_upgrade_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			air_attack = 1
		}
	}

	trait = {
		token = boeing_upgrade_1_3
		name = boeing_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { boeing_upgrade_1 boeing_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = boeing_upgrade_1_4
		name = boeing_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = boeing_upgrade_1_5
		name = boeing_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_conversion_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}
	}

	trait = {
		token = boeing_upgrade_2_1
		name = boeing_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_air_attack

		any_parent = { boeing_upgrade_1_1 boeing_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_attack = 1
		}
	}

	trait = {
		token = boeing_upgrade_2_2
		name = boeing_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { boeing_upgrade_1_1 boeing_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.2
		}
	}

	trait = {
		token = boeing_upgrade_2_3
		name = boeing_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { boeing_upgrade_1_3 }

		mutually_exclusive = { boeing_upgrade_2_4 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			air_defence = 0.15
			weight = 0.1
		}
	}

	trait = {
		token = boeing_upgrade_2_4
		name = boeing_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_air_defence

		all_parents = { boeing_upgrade_1_3 }

		mutually_exclusive = { boeing_upgrade_2_3 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			air_defence = -0.05
			weight = -0.2
		}
	}

	trait = {
		token = boeing_upgrade_2_5
		name = boeing_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { boeing_upgrade_1_3 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.2
		}
	}

	trait = {
		token = boeing_upgrade_2_6
		name = boeing_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			798 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { boeing_upgrade_2_7 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				798 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = los_angeles_military_factory_removed }
					add_to_variable = { los_angeles_military_factory_removed = 1 }
				}
				else = {
					set_variable = { los_angeles_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = boeing_upgrade_2_7
		name = boeing_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			261 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			361 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { boeing_upgrade_2_6 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				261 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				361 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = ohio_civilian_factory_removed }
					add_to_variable = { ohio_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { ohio_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = boeing_upgrade_3_1
		name = boeing_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_2
		name = boeing_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_3
		name = boeing_upgrade_3_3
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_4
		name = boeing_upgrade_3_4
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_5
		name = boeing_upgrade_3_5
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_north_american_aviation_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_6
		name = boeing_upgrade_3_6
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_CW_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_7
		name = boeing_upgrade_3_7
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Vought_Boeing
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = boeing_upgrade_3_8
		name = boeing_upgrade_3_8
		icon = GFX_icon_douglas_MIO

		available = {
			douglas_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			thrust = 0.1
		}

		on_complete = {
			douglas_merge_levels_and_funds = yes
			custom_effect_tooltip = douglas_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Boeing_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_douglas_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_douglas_organisation = { #Douglas
	name = USA_douglas
	icon = GFX_idea_douglas_aircraft_company

	allowed = { is_american_tag = yes }
	available = {
		798 = { is_owned_and_controlled_by = FROM } #Los Angeles
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		tactical_bomber
		large_plane_airframe
	}

	research_categories = {
		mio_cat_all_medium_aircraft_and_modules
		mio_cat_all_heavy_aircraft_and_modules
		jet_technology
		plane_modules_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = douglas_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = douglas_upgrade_1
		name = douglas_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_thrust

		position = { x = 1 y = 0 }

		equipment_bonus = {
			thrust = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2
		name = douglas_upgrade_2
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 3 y = 0 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_3
		name = douglas_upgrade_3
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber

		mutually_exclusive = { douglas_upgrade_4 }

		position = { x = 4 y = 0 }

		on_complete = {
			FROM = {
				if = {
					limit = { NOT = { has_tech = iw_large_airframe } }
					set_technology = { iw_large_airframe = 1 }
				}
				create_equipment_variant = {
					type = large_plane_airframe_0
					name = "B-17"
					show_position = no
					modules = {
						fixed_main_weapon_slot = large_bomb_bay
						fixed_auxiliary_weapon_slot_1 = large_bomb_bay
						fixed_auxiliary_weapon_slot_2 = large_bomb_bay
						fixed_auxiliary_weapon_slot_3 = large_bomb_bay
						engine_type_slot = engine_2_6x
					}
				}
				if = {
					limit = { douglas_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "200"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = large_plane_airframe_0
							amount = 200
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = add_equipment_to_stockpile_tt
							UNITS = "100"
							EQUIPMENT = "B-17 Strategic Bomber"
						}
					}
					hidden_effect = {
						add_equipment_to_stockpile = {
							type = large_plane_airframe_0
							amount = 100
							variant_name = "B-17"
							producer = FROM
						}
					}
				}
			}
		}
	}

	trait = {
		token = douglas_upgrade_4
		name = douglas_upgrade_4
		icon = GFX_generic_mio_trait_icon_strategic_attack

		mutually_exclusive = { douglas_upgrade_3 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_1_1
		name = douglas_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { douglas_upgrade_2 }
		any_parent = { douglas_upgrade_3 douglas_upgrade_4 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_1_2
		name = douglas_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_range

		any_parent = { douglas_upgrade_3 douglas_upgrade_4 }

		mutually_exclusive = { douglas_upgrade_1_3 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			air_bombing = -0.1
			air_range = 0.2
		}
	}

	trait = {
		token = douglas_upgrade_1_3
		name = douglas_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_strategic_attack

		any_parent = { douglas_upgrade_3 douglas_upgrade_4 }

		mutually_exclusive = { douglas_upgrade_1_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_1_4
		name = douglas_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_air_mio_equipment_tt
		}
	}

	trait = {
		token = douglas_upgrade_1_5
		name = douglas_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_funds

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = douglas_upgrade_2_1
		name = douglas_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { douglas_upgrade_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2_2
		name = douglas_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { douglas_upgrade_1 douglas_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2_3
		name = douglas_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_strategic_attack

		all_parents = { douglas_upgrade_1_1 }
		any_parent = { douglas_upgrade_1_2 douglas_upgrade_1_3 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			air_bombing = 0.1
		}
	}

	trait = {
		token = douglas_upgrade_2_4
		name = douglas_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			930 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { douglas_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				930 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = buffalo_military_factory_removed }
					add_to_variable = { buffalo_military_factory_removed = 1 }
				}
				else = {
					set_variable = { buffalo_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = douglas_upgrade_2_5
		name = douglas_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			361 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			798 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { douglas_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				361 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				798 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = maryland_civlian_factory_removed }
					add_to_variable = { maryland_civlian_factory_removed = 2 }
				}
				else = {
					set_variable = { maryland_civlian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = douglas_upgrade_3_1
		name = douglas_upgrade_3_1
		icon = GFX_icon_bell_MIO

		available = {
			bell_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Bell_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			bell_merge_levels_and_funds = yes
			custom_effect_tooltip = bell_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Bell_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_bell_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_2
		name = douglas_upgrade_3_2
		icon = GFX_icon_consolidated_MIO

		available = {
			consolidated_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Consolidated_not_merged_yet
				consolidated_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			air_attack = 0.03
			air_defence = 0.03
			air_superiority = 0.03
			reliability = 0.03
			naval_strike_attack = 0.03
			naval_strike_targetting = 0.03
			thrust = 0.03
			weight = -0.03
			maximum_speed = 0.03
			air_range = 0.03
			surface_detection = 0.03
			sub_detection = 0.03
			air_ground_attack = 0.03
			strategic_attack = 0.03
			mines_planting = 0.03
			mines_sweeping = 0.03
		}

		on_complete = {
			consolidated_merge_levels_and_funds = yes
			custom_effect_tooltip = consolidated_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Consolidated_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_consolidated_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_3
		name = douglas_upgrade_3_3
		icon = GFX_icon_grumman_MIO

		available = {
			grumman_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Grumman_not_merged_yet
				grumman_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			naval_strike_attack = 0.1
		}

		on_complete = {
			grumman_merge_levels_and_funds = yes
			custom_effect_tooltip = grumman_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Grumman_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_grumman_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_4
		name = douglas_upgrade_3_4
		icon = GFX_icon_lockheed_MIO

		available = {
			lockheed_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Lockheed_not_merged_yet
				lockheed_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			air_defence = 0.1
		}

		on_complete = {
			lockheed_merge_levels_and_funds = yes
			custom_effect_tooltip = lockheed_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Lockheed_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_lockheed_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_5
		name = douglas_upgrade_3_5
		icon = GFX_icon_north_american_aviation_MIO

		available = {
			north_american_aviation_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_North_american_aviation_not_merged_yet
				north_american_aviation_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			air_range = 0.1
		}

		on_complete = {
			north_american_aviation_merge_levels_and_funds = yes
			custom_effect_tooltip = north_american_aviation_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_NAA_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_north_american_aviation_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_6
		name = douglas_upgrade_3_6
		icon = GFX_icon_curtiss_wright_MIO

		available = {
			curtiss_wright_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Curtiss_Wright_not_merged_yet
				curtiss_wright_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			curtiss_wright_merge_levels_and_funds = yes
			custom_effect_tooltip = curtiss_wright_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_CW_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_curtiss_wright_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_7
		name = douglas_upgrade_3_7
		icon = GFX_icon_vought_MIO

		available = {
			vought_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Vought_not_merged_yet
				vought_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			weight = -0.1
		}

		on_complete = {
			vought_merge_levels_and_funds = yes
			custom_effect_tooltip = vought_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Vought_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_vought_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = douglas_upgrade_3_8
		name = douglas_upgrade_3_8
		icon = GFX_icon_boeing_MIO

		available = {
			boeing_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Douglas_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Boeing_not_merged_yet
				douglas_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			air_attack = 0.1
		}

		on_complete = {
			boeing_merge_levels_and_funds = yes
			custom_effect_tooltip = boeing_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Boeing_Douglas
			set_mio_flag = USA_MIO_merge_once
			USA_boeing_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}

#####################
### Materiel MIOs ###
#####################
USA_browning_organisation = { #Browning Arms
	name = USA_browning
	icon = GFX_idea_USA_browning

	allowed = { is_american_tag = yes }
	available = {
		380 = { is_owned_and_controlled_by = FROM } #Utah
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		infantry_equipment
		support_equipment
	}

	research_categories = {
		infantry_weapons
		support_tech
		battlefield_support_tree
		cat_battlefield_support
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = browning_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = browning_upgrade_1
		name = browning_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 380 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { browning_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { browning_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[380.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[380.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { browning_stockpile_trait_unlocked = yes }
						380 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						380 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { browning_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = browning_upgrade_2
		name = browning_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { browning_upgrade_1 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = browning_upgrade_3
		name = browning_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { browning_upgrade_4 }

		position = { x = 2 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = browning_upgrade_4
		name = browning_upgrade_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { browning_upgrade_3 }

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1.5
		}
	}

	trait = {
		token = browning_upgrade_5
		name = browning_upgrade_5
		icon = GFX_generic_mio_trait_icon_resources

		mutually_exclusive = { browning_upgrade_6 }

		position = { x = 4 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = browning_upgrade_6
		name = browning_upgrade_6
		icon = GFX_generic_mio_trait_icon_resources

		mutually_exclusive = { browning_upgrade_5 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1.5
		}
	}

	trait = {
		token = browning_upgrade_7
		name = browning_upgrade_7
		icon = GFX_generic_mio_trait_icon_conversion_speed

		mutually_exclusive = { browning_upgrade_8 }

		position = { x = 6 y = 0 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = browning_upgrade_8
		name = browning_upgrade_8
		icon = GFX_generic_mio_trait_icon_conversion_speed

		mutually_exclusive = { browning_upgrade_7 }

		position = { x = 7 y = 0 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = 1.5
		}
	}

	trait = {
		token = browning_upgrade_1_1
		name = browning_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { browning_upgrade_1 browning_upgrade_2 }
		any_parent = { browning_upgrade_3 browning_upgrade_4 }

		position = { x = 2 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = browning_upgrade_1_2
		name = browning_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { browning_upgrade_5 browning_upgrade_6 }
		any_parent = { browning_upgrade_7 browning_upgrade_8 }

		position = { x = 5 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = browning_upgrade_1_3
		name = browning_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = browning_upgrade_1_4
		name = browning_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_assign_cost

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.5
		}
	}

	trait = {
		token = browning_upgrade_2_1
		name = browning_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { browning_upgrade_1_1 browning_upgrade_1_2 }

		position = { x = 3 y = 2 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = browning_upgrade_2_2
		name = browning_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_resources

		all_parents = { browning_upgrade_1_1 browning_upgrade_1_2 }

		position = { x = 4 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.15
			production_efficiency_gain_factor = 0.05
		}
	}

	trait = {
		token = browning_upgrade_2_3
		name = browning_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			380 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { browning_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				380 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = browning_upgrade_2_4
		name = browning_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			931 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			380 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { browning_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				931 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				380 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = connecticut_civilian_factory_removed }
					add_to_variable = { connecticut_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { connecticut_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = browning_upgrade_3_1
		name = browning_upgrade_3_1
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Colt
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_2
		name = browning_upgrade_3_2
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Remington
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_3
		name = browning_upgrade_3_3
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Springfield
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_4
		name = browning_upgrade_3_4
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_5
		name = browning_upgrade_3_5
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_6
		name = browning_upgrade_3_6
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_7
		name = browning_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_8
		name = browning_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = browning_upgrade_3_9
		name = browning_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_colt_organisation = { #Colt
	name = USA_colt
	icon = GFX_idea_USA_colt

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Connecticut
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = colt_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = colt_upgrade_1
		name = colt_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 931 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { colt_upgrade_2 }

		position = { x = 3 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { colt_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { colt_stockpile_trait_unlocked = yes }
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { colt_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = colt_upgrade_2
		name = colt_upgrade_2
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { colt_upgrade_1 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = colt_upgrade_1_1
		name = colt_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { colt_upgrade_1 colt_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = colt_upgrade_1_2
		name = colt_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { colt_upgrade_1 colt_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			breakthrough = 0.2
		}
	}

	trait = {
		token = colt_upgrade_1_3
		name = colt_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = colt_upgrade_1_4
		name = colt_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { army_experience = 50 }
		}
	}

	trait = {
		token = colt_upgrade_2_1
		name = colt_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { colt_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_2
		name = colt_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { colt_upgrade_1_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_3
		name = colt_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_1 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_4
		name = colt_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_1 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_5
		name = colt_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_2 }

		mutually_exclusive = { colt_upgrade_2_6 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = colt_upgrade_2_6
		name = colt_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { colt_upgrade_1_2 }

		mutually_exclusive = { colt_upgrade_2_5 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = -0.3
		}
	}

	trait = {
		token = colt_upgrade_2_7
		name = colt_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { colt_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = colt_upgrade_2_8
		name = colt_upgrade_2_8
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { colt_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = colt_upgrade_3_1
		name = colt_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Colt
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_2
		name = colt_upgrade_3_2
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Remington
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_3
		name = colt_upgrade_3_3
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Springfield
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_4
		name = colt_upgrade_3_4
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_5
		name = colt_upgrade_3_5
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_6
		name = colt_upgrade_3_6
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_7
		name = colt_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_8
		name = colt_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = colt_upgrade_3_9
		name = colt_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_remington_organisation = { #Remington Arms
	name = USA_remington
	icon = GFX_idea_USA_remington

	allowed = { is_american_tag = yes }
	available = {
		796 = { is_owned_and_controlled_by = FROM } #Albany
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = remington_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = remington_upgrade_1
		name = remington_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = {
			796 = { is_fully_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_2 }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { remington_stockpile_trait_unlocked = yes }
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2
		name = remington_upgrade_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_1 }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = remington_upgrade_3
		name = remington_upgrade_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = remington_upgrade_4
		name = remington_upgrade_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = remington_upgrade_5
		name = remington_upgrade_5
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_6 }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hard_attack = 0.5
			ap_attack = 0.5
		}
	}

	trait = {
		token = remington_upgrade_6
		name = remington_upgrade_6
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		mutually_exclusive = { remington_upgrade_5 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hard_attack = 1
			ap_attack = 1
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = remington_upgrade_1_1
		name = remington_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_defense

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1 remington_upgrade_2 }
		all_parents = { remington_upgrade_3 }

		mutually_exclusive = { remington_upgrade_1_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = 0.1
		}
	}

	trait = {
		token = remington_upgrade_1_2
		name = remington_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_defense

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_5 remington_upgrade_6 }
		all_parents = { remington_upgrade_4 }

		mutually_exclusive = { remington_upgrade_1_1 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			defense = 0.2
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = remington_upgrade_1_3
		name = remington_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = remington_upgrade_1_4
		name = remington_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = remington_upgrade_2_1
		name = remington_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_ap_attack

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1_1 remington_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			ap_attack = 1
		}
	}

	trait = {
		token = remington_upgrade_normal
		name = remington_upgrade_normal
		icon = GFX_generic_mio_department_icon_infantry_offense

		visible = {
			NOT = {
				has_mio_flag = remington_normal_upgrades
				has_mio_flag = remington_improved_upgrades
			}
		}

		position = { x = 2 y = 2 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_normal
			set_mio_flag = remington_normal_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = remington_upgrade_2_2
		name = remington_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_defense

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1_1 remington_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			defense = 0.1
		}
	}

	trait = {
		token = remington_upgrade_improved
		name = remington_upgrade_improved
		icon = GFX_generic_mio_department_icon_infantry_quality

		visible = {
			NOT = {
				has_mio_flag = remington_normal_upgrades
				has_mio_flag = remington_improved_upgrades
			}
		}

		position = { x = 4 y = 2 }

		on_complete = {
			custom_effect_tooltip = USA_upgrade_improved_civs_and_mils
			set_mio_flag = remington_improved_upgrades
			custom_effect_tooltip = tooltip_white_line
			add_mio_size = 1
		}
	}

	trait = {
		token = remington_upgrade_2_3
		name = remington_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_hard_attack

		visible = { NOT = { has_mio_flag = remington_improved_upgrades } }

		any_parent = { remington_upgrade_1_1 remington_upgrade_1_2 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			hard_attack = 1
		}
	}

	trait = {
		token = remington_upgrade_2_4
		name = remington_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { remington_upgrade_2_5 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = remington_upgrade_2_5
		name = remington_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { remington_upgrade_2_4 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = remington_upgrade_3_1
		name = remington_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Remington
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_2
		name = remington_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Remington
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_3
		name = remington_upgrade_3_3
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Springfield
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_4
		name = remington_upgrade_3_4
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_5
		name = remington_upgrade_3_5
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_6
		name = remington_upgrade_3_6
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_7
		name = remington_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_8
		name = remington_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_3_9
		name = remington_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = remington_upgrade_1_improved
		name = remington_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = {
			796 = { is_fully_controlled_by = FROM }
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_2_improved }

		position = { x = 0 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { remington_stockpile_trait_unlocked = yes }
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						796 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { remington_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_improved
		name = remington_upgrade_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_1_improved }

		position = { x = 1 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_3_improved
		name = remington_upgrade_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_4_improved
		name = remington_upgrade_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_5_improved
		name = remington_upgrade_5
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_6_improved }

		position = { x = 5 y = 0 }

		equipment_bonus = {
			hard_attack = 0.75
			ap_attack = 0.75
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_6_improved
		name = remington_upgrade_6
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			custom_override_tooltip = {
				tooltip = USA_MIO_upgrade_chosen
				OR = {
					has_mio_flag = remington_normal_upgrades
					has_mio_flag = remington_improved_upgrades
				}
			}
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		mutually_exclusive = { remington_upgrade_5_improved }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hard_attack = 1.5
			ap_attack = 1.5
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_1_1_improved
		name = remington_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_improved remington_upgrade_2_improved }
		all_parents = { remington_upgrade_3_improved }

		mutually_exclusive = { remington_upgrade_1_2_improved }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			defense = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_1_2_improved
		name = remington_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_5_improved remington_upgrade_6_improved }
		all_parents = { remington_upgrade_4_improved }

		mutually_exclusive = { remington_upgrade_1_1_improved }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			defense = 0.3
			build_cost_ic = 0.05
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_1_improved
		name = remington_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_ap_attack

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_1_improved remington_upgrade_1_2_improved }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			ap_attack = 1.5
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_2_improved
		name = remington_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_defense

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				arms_factory > 2
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_1_improved remington_upgrade_1_2_improved }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			defense = 0.15
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { arms_factory > 2 }
						remove_building = {
							type = arms_factory
							level = 3
						}
					}
				}
			}
		}
	}

	trait = {
		token = remington_upgrade_2_3_improved
		name = remington_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_hard_attack

		available = {
			796 = { #Albany
				is_owned_and_controlled_by = FROM
				industrial_complex > 4
			}
		}

		visible = { has_mio_flag = remington_improved_upgrades }

		any_parent = { remington_upgrade_1_1_improved remington_upgrade_1_2_improved }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			hard_attack = 1.5
		}

		on_complete = {
			FROM = {
				796 = {
					if = {
						limit = { industrial_complex > 4 }
						remove_building = {
							type = industrial_complex
							level = 5
						}
					}
				}
			}
		}
	}
}
USA_springfield_armory_organisation = { #Springfield Armory
	name = USA_springfield_armory
	icon = GFX_idea_springfield_armory

	allowed = { is_american_tag = yes }
	available = {
		932 = { is_owned_and_controlled_by = FROM } #Massachusetts
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = springfield_armory_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_1
		name = springfield_armory_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 932 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { springfield_armory_upgrade_2 }

		position = { x = 3 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { springfield_armory_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[932.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[932.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { springfield_armory_stockpile_trait_unlocked = yes }
						932 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						932 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { springfield_armory_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = springfield_armory_upgrade_2
		name = springfield_armory_upgrade_2
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { springfield_armory_upgrade_1 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			soft_attack = 0.05
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_1
		name = springfield_armory_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_2 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			defense = 0.05
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_2
		name = springfield_armory_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_1 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			defense = 0.1
			reliability = -0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_3
		name = springfield_armory_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_4 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_4
		name = springfield_armory_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { springfield_armory_upgrade_1 springfield_armory_upgrade_2 }

		mutually_exclusive = { springfield_armory_upgrade_1_3 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.2
			reliability = -0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_5
		name = springfield_armory_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = springfield_armory_upgrade_1_6
		name = springfield_armory_upgrade_1_6
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_1
		name = springfield_armory_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			hard_attack = 1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_2
		name = springfield_armory_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_ap_attack

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			ap_attack = 1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_3
		name = springfield_armory_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }
		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			breakthrough = 0.1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_4
		name = springfield_armory_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { springfield_armory_upgrade_1_1 springfield_armory_upgrade_1_2 }
		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
			reliability = -0.2
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_5
		name = springfield_armory_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_6
		name = springfield_armory_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { springfield_armory_upgrade_1_3 springfield_armory_upgrade_1_4 }

		position = { x = 7 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_7
		name = springfield_armory_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			932 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { springfield_armory_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				932 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = springfield_armory_upgrade_2_8
		name = springfield_armory_upgrade_2_8
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			932 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { springfield_armory_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				932 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_1
		name = springfield_armory_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Springfield
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_2
		name = springfield_armory_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Springfield
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_3
		name = springfield_armory_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Springfield
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_4
		name = springfield_armory_upgrade_3_4
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_5
		name = springfield_armory_upgrade_3_5
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_6
		name = springfield_armory_upgrade_3_6
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_7
		name = springfield_armory_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_8
		name = springfield_armory_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = springfield_armory_upgrade_3_9
		name = springfield_armory_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_winchester_repeating_arms_organisation = { #Winchester Repeating Arms
	name = USA_winchester_repeating_arms
	icon = GFX_idea_USA_winchester_repeating_arms

	allowed = { is_american_tag = yes }
	available = {
		931 = { is_owned_and_controlled_by = FROM } #Connecticut
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		infantry_equipment
	}

	research_categories = {
		infantry_weapons
		night_vision
		cat_special_forces_generic
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = winchester_repeating_arms_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1
		name = winchester_repeating_arms_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_infantry_division

		available = { 931 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				USA_add_light_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { winchester_repeating_arms_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_light_infantry_division
							STRENGTH = "100%"
							LOCATION = "[931.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_light_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { winchester_repeating_arms_stockpile_trait_unlocked = yes }
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						931 = {
							create_unit = {
								division = "division_template = \"Light Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { winchester_repeating_arms_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
					}
				}
			}
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2
		name = winchester_repeating_arms_upgrade_2
		icon = GFX_generic_mio_trait_icon_resources

		mutually_exclusive = { winchester_repeating_arms_upgrade_1 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			build_cost_ic = -0.03
		}

		production_bonus = {
			production_resource_need_factor = 0.3
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_1
		name = winchester_repeating_arms_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { winchester_repeating_arms_upgrade_1 winchester_repeating_arms_upgrade_2 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
			reliability = -0.1
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_2
		name = winchester_repeating_arms_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { winchester_repeating_arms_upgrade_1 winchester_repeating_arms_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
			soft_attack = -0.05
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_3
		name = winchester_repeating_arms_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { winchester_repeating_arms_upgrade_1 winchester_repeating_arms_upgrade_2 }

		position = { x = 5 y = 1 }

		equipment_bonus = {
			build_cost_ic = -0.015
			maximum_speed = -0.15
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_4
		name = winchester_repeating_arms_upgrade_1_4
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_light_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_1_5
		name = winchester_repeating_arms_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_resources

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_1
		name = winchester_repeating_arms_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { winchester_repeating_arms_upgrade_1_1 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			defense = -0.05
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_2
		name = winchester_repeating_arms_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { winchester_repeating_arms_upgrade_1_1 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_1 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			breakthrough = -0.1
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_3
		name = winchester_repeating_arms_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { winchester_repeating_arms_upgrade_1_2 }

		position = { x = 2 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			hard_attack = -0.5
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_4
		name = winchester_repeating_arms_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_ap_attack

		all_parents = { winchester_repeating_arms_upgrade_1_2 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			ap_attack = -0.5
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_5
		name = winchester_repeating_arms_upgrade_2_5
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { winchester_repeating_arms_upgrade_1_3 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_6 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			defense = -0.05
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_6
		name = winchester_repeating_arms_upgrade_2_6
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { winchester_repeating_arms_upgrade_1_3 }

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_5 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			build_cost_ic = -0.015
			breakthrough = -0.1
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_7
		name = winchester_repeating_arms_upgrade_2_7
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_8 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_2_8
		name = winchester_repeating_arms_upgrade_2_8
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			931 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { winchester_repeating_arms_upgrade_2_7 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				931 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_1
		name = winchester_repeating_arms_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_2
		name = winchester_repeating_arms_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_3
		name = winchester_repeating_arms_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_4
		name = winchester_repeating_arms_upgrade_3_4
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Winchester
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_5
		name = winchester_repeating_arms_upgrade_3_5
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_6
		name = winchester_repeating_arms_upgrade_3_6
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_7
		name = winchester_repeating_arms_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_8
		name = winchester_repeating_arms_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = winchester_repeating_arms_upgrade_3_9
		name = winchester_repeating_arms_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_army_ordnance_department_organisation = { #Army Ordnance Department
	name = USA_army_ordnance_department
	icon = GFX_idea_army_ordnance_department

	allowed = { is_american_tag = yes }
	available = {
		362 = { is_owned_and_controlled_by = FROM } #Virginia
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
		railway_gun_equipment
		train_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
		train_tech
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = army_ordnance_department_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1
		name = army_ordnance_department_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_artillery_division

		available = { 362 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { army_ordnance_department_upgrade_2 }

		position = { x = 1 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			FROM = {
				USA_add_heavy_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { army_ordnance_department_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[362.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[362.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { army_ordnance_department_stockpile_trait_unlocked = yes }
						362 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						362 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { army_ordnance_department_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1500
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
			}
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2
		name = army_ordnance_department_upgrade_2
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		mutually_exclusive = { army_ordnance_department_upgrade_1 }

		position = { x = 2 y = 0 }

		production_bonus = {
			production_efficiency_cap_factor = 0.1
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3
		name = army_ordnance_department_upgrade_3
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		position = { x = 3 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_4
		name = army_ordnance_department_upgrade_4
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { army_ordnance_department_upgrade_5 }

		position = { x = 4 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_5
		name = army_ordnance_department_upgrade_5
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		mutually_exclusive = { army_ordnance_department_upgrade_4 }

		position = { x = 5 y = 0 }

		production_bonus = {
			production_efficiency_gain_factor = 0.2
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_6
		name = army_ordnance_department_upgrade_6
		icon = GFX_icon_Long_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { army_ordnance_department_upgrade_7 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_loses_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = -1 } }
			}
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_7
		name = army_ordnance_department_upgrade_7
		icon = GFX_icon_Long_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { army_ordnance_department_upgrade_6 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = {
				custom_effect_tooltip = USA_Long_gains_strength
				hidden_effect = { add_to_variable = { var = Long_strength value = 1 } }
			}
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_1
		name = army_ordnance_department_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { army_ordnance_department_upgrade_1 army_ordnance_department_upgrade_2 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_2 }

		position = { x = 0 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_2
		name = army_ordnance_department_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { army_ordnance_department_upgrade_1 army_ordnance_department_upgrade_2 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_1 }

		position = { x = 1 y = 1 }

		production_bonus = {
			production_resource_need_factor = -0.2
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_3
		name = army_ordnance_department_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		any_parent = { army_ordnance_department_upgrade_1 army_ordnance_department_upgrade_2 }
		all_parents = { army_ordnance_department_upgrade_3 }
		any_parent = { army_ordnance_department_upgrade_4 army_ordnance_department_upgrade_5 }

		position = { x = 3 y = 1 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_4
		name = army_ordnance_department_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { army_ordnance_department_upgrade_4 army_ordnance_department_upgrade_5 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_5 }

		position = { x = 5 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_5
		name = army_ordnance_department_upgrade_1_5
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { army_ordnance_department_upgrade_4 army_ordnance_department_upgrade_5 }

		mutually_exclusive = { army_ordnance_department_upgrade_1_4 }

		position = { x = 6 y = 1 }

		production_bonus = {
			production_conversion_speed_factor = 0.4
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_6
		name = army_ordnance_department_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_1_7
		name = army_ordnance_department_upgrade_1_7
		icon = GFX_KR_generic_mio_trait_icon_army_xp

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		on_complete = {
			FROM = { army_experience = 50 }
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_1
		name = army_ordnance_department_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_resources

		any_parent = { army_ordnance_department_upgrade_1_1 army_ordnance_department_upgrade_1_2 }

		position = { x = 0 y = 2 }

		production_bonus = {
			production_resource_need_factor = -0.15
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_2
		name = army_ordnance_department_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_conversion_speed

		any_parent = { army_ordnance_department_upgrade_1_4 army_ordnance_department_upgrade_1_5 }

		position = { x = 6 y = 2 }

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_3
		name = army_ordnance_department_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { army_ordnance_department_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_2_4
		name = army_ordnance_department_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			931 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			362 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { army_ordnance_department_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				931 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				362 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = connecticut_civilian_factory_removed }
					add_to_variable = { connecticut_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { connecticut_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_1
		name = army_ordnance_department_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_2
		name = army_ordnance_department_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_3
		name = army_ordnance_department_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_4
		name = army_ordnance_department_upgrade_3_4
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_5
		name = army_ordnance_department_upgrade_3_5
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_AOD
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_6
		name = army_ordnance_department_upgrade_3_6
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_7
		name = army_ordnance_department_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_8
		name = army_ordnance_department_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = army_ordnance_department_upgrade_3_9
		name = army_ordnance_department_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_rock_island_arsenal_organisation = { #Rock Island Arsenal
	name = USA_rock_island_arsenal
	icon = GFX_idea_rock_island_arsenal

	allowed = { is_american_tag = yes }
	available = {
		395 = { is_owned_and_controlled_by = FROM } #Illinois
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = rock_island_arsenal_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1
		name = rock_island_arsenal_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_artillery_division

		available = { 362 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { rock_island_arsenal_upgrade_2 }

		position = { x = 0 y = 0 }

		equipment_bonus = {
			reliability = 0.2
		}

		on_complete = {
			FROM = {
				USA_add_heavy_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { rock_island_arsenal_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[395.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[395.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { rock_island_arsenal_stockpile_trait_unlocked = yes }
						395 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						395 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { rock_island_arsenal_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1500
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
			}
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2
		name = rock_island_arsenal_upgrade_2
		icon = GFX_generic_mio_trait_icon_soft_attack

		mutually_exclusive = { rock_island_arsenal_upgrade_1 }

		position = { x = 2 y = 0 }

		equipment_bonus = {
			reliability = 0.2
			soft_attack = 0.05
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3
		name = rock_island_arsenal_upgrade_3
		icon = GFX_icon_SPA_decrease

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { rock_island_arsenal_upgrade_4 }

		position = { x = 8 y = 0 }

		on_complete = {
			FROM = { 360 = { USA_decrease_SPA_state_support = yes } }
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_4
		name = rock_island_arsenal_upgrade_4
		icon = GFX_icon_SPA_increase

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		mutually_exclusive = { rock_island_arsenal_upgrade_3 }

		position = { x = 9 y = 0 }

		on_complete = {
			FROM = { 360 = { USA_increase_SPA_state_support = yes } }
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_1
		name = rock_island_arsenal_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		mutually_exclusive = { rock_island_arsenal_upgrade_1_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			soft_attack = 0.05
			breakthrough = 0.1
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_2
		name = rock_island_arsenal_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		mutually_exclusive = { rock_island_arsenal_upgrade_1_1 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			soft_attack = 0.05
			breakthrough = 0.2
		}

		production_bonus = {
			production_efficiency_cap_factor = -0.05
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_3
		name = rock_island_arsenal_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		position = { x = 4 y = 1 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			soft_attack = 2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_4
		name = rock_island_arsenal_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_soft_attack

		any_parent = { rock_island_arsenal_upgrade_1 rock_island_arsenal_upgrade_2 }

		position = { x = 6 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			soft_attack = 2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_5
		name = rock_island_arsenal_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_1_6
		name = rock_island_arsenal_upgrade_1_6
		icon = GFX_generic_mio_trait_icon_production_capacity

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_1
		name = rock_island_arsenal_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1_1 rock_island_arsenal_upgrade_1_2 }

		position = { x = 1 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_2
		name = rock_island_arsenal_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { rock_island_arsenal_upgrade_1_1 rock_island_arsenal_upgrade_1_2 }

		position = { x = 3 y = 2 }

		equipment_bonus = {
			breakthrough = 0.2
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_3
		name = rock_island_arsenal_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { rock_island_arsenal_upgrade_1_3 }

		position = { x = 5 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			hard_attack = 0.25
			ap_attack = 0.25
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_4
		name = rock_island_arsenal_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { rock_island_arsenal_upgrade_1_4 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			air_attack = 0.1
			hard_attack = 1
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_5
		name = rock_island_arsenal_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			931 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			395 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { rock_island_arsenal_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				931 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				395 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = connecticut_military_factory_removed }
					add_to_variable = { connecticut_military_factory_removed = 2 }
				}
				else = {
					set_variable = { connecticut_military_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_2_6
		name = rock_island_arsenal_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			395 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { rock_island_arsenal_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				395 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_1
		name = rock_island_arsenal_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_2
		name = rock_island_arsenal_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_3
		name = rock_island_arsenal_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_4
		name = rock_island_arsenal_upgrade_3_4
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_5
		name = rock_island_arsenal_upgrade_3_5
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_6
		name = rock_island_arsenal_upgrade_3_6
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_RIA
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_7
		name = rock_island_arsenal_upgrade_3_7
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_RIA_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_8
		name = rock_island_arsenal_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_RIA_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = rock_island_arsenal_upgrade_3_9
		name = rock_island_arsenal_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_RIA_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_watervliet_arsenal_organisation = { #Watervliet Arsenal
	name = USA_watervliet_arsenal
	icon = GFX_idea_USA_watervliet_arsenal

	allowed = { is_american_tag = yes }
	available = {
		796 = { is_owned_and_controlled_by = FROM } #Albany
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		artillery_equipment
		anti_tank_equipment
		anti_air_equipment
	}

	research_categories = {
		mio_cat_all_artillery_equipment
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = watervliet_arsenal_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1
		name = watervliet_arsenal_upgrade_1
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			hardness = 1
			defense = 1
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2
		name = watervliet_arsenal_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_artillery_division

		available = { 796 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { watervliet_arsenal_upgrade_3 }

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			hard_attack = 3
			ap_attack = 3
		}

		on_complete = {
			FROM = {
				USA_add_heavy_infantry_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { watervliet_arsenal_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[796.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_1
							TYPE = USA_MIO_heavy_infantry_division
							STRENGTH = "100%"
							LOCATION = "[796.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_heavy_infantry_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { watervliet_arsenal_stockpile_trait_unlocked = yes }
						796 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						796 = {
							create_unit = {
								division = "division_template = \"Heavy Infantry Division\" start_experience_factor = 0.1 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { watervliet_arsenal_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1500
					}
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
			}
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3
		name = watervliet_arsenal_upgrade_3
		icon = GFX_generic_mio_trait_icon_defense

		mutually_exclusive = { watervliet_arsenal_upgrade_2 }

		position = { x = 5 y = 0 }

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			defense = 0.1
			hard_attack = 1.5
			ap_attack = 1.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_4
		name = watervliet_arsenal_upgrade_4
		icon = GFX_generic_mio_trait_icon_air_attack

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			air_attack = 0.05
			defense = 0.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_1
		name = watervliet_arsenal_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_hardness

		all_parents = { watervliet_arsenal_upgrade_1 }

		position = { x = 0 y = 1 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			hardness = 1
			defense = 1
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_2
		name = watervliet_arsenal_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_air_attack

		all_parents = { watervliet_arsenal_upgrade_4 }

		position = { x = 7 y = 1 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			air_attack = 0.05
			defense = 0.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_3
		name = watervliet_arsenal_upgrade_1_3
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_heavy_infantry_mio_equipment_tt
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_1_4
		name = watervliet_arsenal_upgrade_1_4
		icon = GFX_generic_mio_department_icon_facilities

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.2
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_1
		name = watervliet_arsenal_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { watervliet_arsenal_upgrade_1_1 }

		position = { x = 0 y = 2 }

		limit_to_equipment_type = { anti_tank_equipment }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_2
		name = watervliet_arsenal_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { watervliet_arsenal_upgrade_1 }
		any_parent = { watervliet_arsenal_upgrade_2 watervliet_arsenal_upgrade_3 }

		mutually_exclusive = { watervliet_arsenal_upgrade_2_3 }

		position = { x = 2 y = 2 }

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			defense = 0.15
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_3
		name = watervliet_arsenal_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { watervliet_arsenal_upgrade_4 }
		any_parent = { watervliet_arsenal_upgrade_2 watervliet_arsenal_upgrade_3 }

		mutually_exclusive = { watervliet_arsenal_upgrade_2_2 }

		position = { x = 5 y = 2 }

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			hard_attack = 1.5
			ap_attack = 1.5
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_4
		name = watervliet_arsenal_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { watervliet_arsenal_upgrade_1_2 }

		position = { x = 7 y = 2 }

		limit_to_equipment_type = { anti_air_equipment }

		equipment_bonus = {
			reliability = 0.15
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_5
		name = watervliet_arsenal_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			395 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { watervliet_arsenal_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				395 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = illinois_military_factory_removed }
					add_to_variable = { illinois_military_factory_removed = 1 }
				}
				else = {
					set_variable = { illinois_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_2_6
		name = watervliet_arsenal_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			796 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { watervliet_arsenal_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				796 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_1
		name = watervliet_arsenal_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_2
		name = watervliet_arsenal_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_3
		name = watervliet_arsenal_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_4
		name = watervliet_arsenal_upgrade_3_4
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_5
		name = watervliet_arsenal_upgrade_3_5
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_6
		name = watervliet_arsenal_upgrade_3_6
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_7
		name = watervliet_arsenal_upgrade_3_7
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_RIA_Watervliet
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_8
		name = watervliet_arsenal_upgrade_3_8
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Watervliet_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = watervliet_arsenal_upgrade_3_9
		name = watervliet_arsenal_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Watervliet_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_studebaker_organisation = { #Studebaker
	name = USA_studebaker
	icon = GFX_idea_USA_studebaker

	allowed = { is_american_tag = yes }
	available = {
		396 = { is_owned_and_controlled_by = FROM } #Albany
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armored_car_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = studebaker_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = studebaker_upgrade_1
		name = studebaker_upgrade_1
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 0 y = 0 }

		equipment_bonus = {
			hardness = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_2
		name = studebaker_upgrade_2
		icon = GFX_KR_generic_mio_trait_icon_motorized_division

		available = { 396 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { studebaker_upgrade_3 }

		position = { x = 2 y = 0 }

		on_complete = {
			FROM = {
				USA_add_motorised_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { studebaker_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[396.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[396.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_motorized_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { studebaker_stockpile_trait_unlocked = yes }
						396 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						396 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { studebaker_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 300
					}
				}
			}
		}
	}

	trait = {
		token = studebaker_upgrade_3
		name = studebaker_upgrade_3
		icon = GFX_generic_mio_trait_icon_armor_value

		mutually_exclusive = { studebaker_upgrade_2 }

		position = { x = 4 y = 0 }

		limit_to_equipment_type = {
			mechanized_equipment
			armored_car_equipment
		}

		equipment_bonus = {
			armor_value = 0.3
		}
	}

	trait = {
		token = studebaker_upgrade_4
		name = studebaker_upgrade_4
		icon = GFX_generic_mio_trait_icon_hardness

		position = { x = 6 y = 0 }

		equipment_bonus = {
			hardness = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_1_1
		name = studebaker_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		position = { x = 1 y = 1 }

		limit_to_equipment_type = {
			mechanized_equipment
			armored_car_equipment
		}

		equipment_bonus = {
			armor_value = 0.35
		}
	}

	trait = {
		token = studebaker_upgrade_1_2
		name = studebaker_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		mutually_exclusive = { studebaker_upgrade_1_3 }

		position = { x = 2 y = 1 }

		equipment_bonus = {
			defense = -0.1
			breakthrough = 0.2
		}
	}

	trait = {
		token = studebaker_upgrade_1_3
		name = studebaker_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		mutually_exclusive = { studebaker_upgrade_1_2 }

		position = { x = 4 y = 1 }

		equipment_bonus = {
			defense = 0.1
			breakthrough = -0.2
		}
	}

	trait = {
		token = studebaker_upgrade_1_4
		name = studebaker_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_armor_value

		any_parent = { studebaker_upgrade_2 studebaker_upgrade_3 }

		position = { x = 5 y = 1 }

		limit_to_equipment_type = {
			mechanized_equipment
			armored_car_equipment
		}

		equipment_bonus = {
			armor_value = 0.35
		}
	}

	trait = {
		token = studebaker_upgrade_1_5
		name = studebaker_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_mechanized_mio_equipment_tt
		}
	}

	trait = {
		token = studebaker_upgrade_1_6
		name = studebaker_upgrade_1_6
		icon = GFX_KR_generic_mio_trait_icon_research_speed

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.3
		}
	}

	trait = {
		token = studebaker_upgrade_2_1
		name = studebaker_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { studebaker_upgrade_1 studebaker_upgrade_1_1 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			breakthrough = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_2_2
		name = studebaker_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_breakthrough

		any_parent = { studebaker_upgrade_4 studebaker_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			breakthrough = 0.15
		}
	}

	trait = {
		token = studebaker_upgrade_2_3
		name = studebaker_upgrade_2_3
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			932 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			396 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { studebaker_upgrade_2_4 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				932 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				396 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = massachussets_military_factory_removed }
					add_to_variable = { massachussets_military_factory_removed = 1 }
				}
				else = {
					set_variable = { massachussets_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = studebaker_upgrade_2_4
		name = studebaker_upgrade_2_4
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			396 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { studebaker_upgrade_2_3 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				396 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = studebaker_upgrade_3_1
		name = studebaker_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_2
		name = studebaker_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_3
		name = studebaker_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_4
		name = studebaker_upgrade_3_4
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_5
		name = studebaker_upgrade_3_5
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_6
		name = studebaker_upgrade_3_6
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_7
		name = studebaker_upgrade_3_7
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_RIA_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_8
		name = studebaker_upgrade_3_8
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Watervliet_Studebaker
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = studebaker_upgrade_3_9
		name = studebaker_upgrade_3_9
		icon = GFX_icon_ford_MIO

		available = {
			ford_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				ford_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			maximum_speed = 0.1
		}

		on_complete = {
			ford_merge_levels_and_funds = yes
			custom_effect_tooltip = ford_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Watervliet_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_ford_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
USA_ford_organisation = { #Ford
	name = USA_ford
	icon = GFX_idea_ford_motor_company

	allowed = { is_american_tag = yes }
	available = {
		393 = { is_owned_and_controlled_by = FROM } #Michigan
		custom_override_tooltip = {
			tooltip = USA_MIO_not_merged_tt
			NOT = { has_mio_flag = USA_MIO_merged }
		}
	}

	equipment_type = {
		motorized_equipment
		mechanized_equipment
		armored_car_equipment
	}

	research_categories = {
		mio_cat_tech_all_motorized_mechanized
	}

	ai_will_do = { base = 10 }

	initial_trait = {
		name = ford_subtitle

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.2
		}
	}

	trait = {
		token = ford_upgrade_1
		name = ford_upgrade_1
		icon = GFX_KR_generic_mio_trait_icon_motorized_division

		available = { 393 = { is_fully_controlled_by = FROM } }

		mutually_exclusive = { ford_upgrade_2 }

		position = { x = 4 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			FROM = {
				USA_add_motorised_division = yes #Won't work inside this MIO scope/file as it causes the game to crash when starting up, so scripted effect fixes this
				if = {
					limit = { ford_stockpile_trait_unlocked = yes }
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_3
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				else = {
					custom_override_tooltip = {
						tooltip = {
							localization_key = tooltip_advanced_spawn_unit
							EXPERIENCE = UNIT_LEVEL_0
							TYPE = USA_MIO_motorized_division
							STRENGTH = "100%"
							LOCATION = "[393.GetName]"
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				custom_effect_tooltip = USA_motorized_mio_spawn_tt
				custom_effect_tooltip = tooltip_white_line
				hidden_effect = {
					if = {
						limit = { ford_stockpile_trait_unlocked = yes }
						393 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\" start_experience_factor = 0.75 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
					else = {
						393 = {
							create_unit = {
								division = "division_template = \"Light Motorized Division\" start_experience_factor = 0 start_equipment_factor = 1"
								owner = FROM
							}
						}
					}
				}
				custom_effect_tooltip = tooltip_white_line
				if = {
					limit = { ford_stockpile_trait_unlocked = yes }
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = 300
					}
				}
			}
		}
	}

	trait = {
		token = ford_upgrade_2
		name = ford_upgrade_2
		icon = GFX_generic_mio_trait_icon_maximum_speed

		mutually_exclusive = { ford_upgrade_1 }

		position = { x = 6 y = 0 }

		equipment_bonus = {
			maximum_speed = 0.1
			breakthrough = -0.2
		}
	}

	trait = {
		token = ford_upgrade_1_1
		name = ford_upgrade_1_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		mutually_exclusive = { ford_upgrade_1_2 }

		position = { x = 0 y = 1 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = ford_upgrade_1_2
		name = ford_upgrade_1_2
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		mutually_exclusive = { ford_upgrade_1_1 }

		position = { x = 1 y = 1 }

		equipment_bonus = {
			reliability = 0.2
			build_cost_ic = 0.05
		}
	}

	trait = {
		token = ford_upgrade_1_3
		name = ford_upgrade_1_3
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		position = { x = 3 y = 1 }

		equipment_bonus = {
			fuel_consumption = -0.25
		}
	}

	trait = {
		token = ford_upgrade_1_4
		name = ford_upgrade_1_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { ford_upgrade_1 ford_upgrade_2 }

		position = { x = 6 y = 1 }

		equipment_bonus = {
			maximum_speed = 0.1
		}
	}

	trait = {
		token = ford_upgrade_1_5
		name = ford_upgrade_1_5
		icon = GFX_KR_generic_mio_trait_icon_stockpile

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 8 y = 1 }

		on_complete = {
			custom_effect_tooltip = USA_mechanized_mio_equipment_tt
		}
	}

	trait = {
		token = ford_upgrade_1_6
		name = ford_upgrade_1_6
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		available = { NOT = { has_global_flag = USA_civil_war_begun_flag } }

		position = { x = 9 y = 1 }

		production_bonus = {
			production_cost_factor = -0.05
		}
	}

	trait = {
		token = ford_upgrade_2_1
		name = ford_upgrade_2_1
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { ford_upgrade_1_1 ford_upgrade_1_2 }

		position = { x = 0 y = 2 }

		equipment_bonus = {
			reliability = 0.1
		}
	}

	trait = {
		token = ford_upgrade_2_2
		name = ford_upgrade_2_2
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		all_parents = { ford_upgrade_1_3 }

		position = { x = 4 y = 2 }

		equipment_bonus = {
			fuel_consumption = -0.25
		}
	}

	trait = {
		token = ford_upgrade_2_3
		name = ford_upgrade_2_3
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { ford_upgrade_1_4 }

		position = { x = 5 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = ford_upgrade_2_4
		name = ford_upgrade_2_4
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { ford_upgrade_1_4 }

		position = { x = 6 y = 2 }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = ford_upgrade_2_5
		name = ford_upgrade_2_5
		icon = GFX_KR_generic_mio_trait_icon_military_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			932 = {
				arms_factory > 0
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { ford_upgrade_2_6 }

		position = { x = 8 y = 2 }

		on_complete = {
			FROM = {
				932 = {
					if = {
						limit = { arms_factory > 0 }
						remove_building = {
							type = arms_factory
							level = 1
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = massachussets_military_factory_removed }
					add_to_variable = { massachussets_military_factory_removed = 1 }
				}
				else = {
					set_variable = { massachussets_military_factory_removed = 1 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = ford_upgrade_2_6
		name = ford_upgrade_2_6
		icon = GFX_KR_generic_mio_trait_icon_civilian_factory

		available = {
			NOT = { has_global_flag = USA_civil_war_begun_flag }
			362 = {
				industrial_complex > 1
				is_owned_and_controlled_by = FROM
			}
			393 = { is_owned_and_controlled_by = FROM }
		}

		mutually_exclusive = { ford_upgrade_2_5 }

		position = { x = 9 y = 2 }

		on_complete = {
			FROM = {
				362 = {
					if = {
						limit = { industrial_complex > 1 }
						remove_building = {
							type = industrial_complex
							level = 2
						}
					}
				}
				393 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				if = {
					limit = { has_variable = virginia_civilian_factory_removed }
					add_to_variable = { virginia_civilian_factory_removed = 2 }
				}
				else = {
					set_variable = { virginia_civilian_factory_removed = 2 }
				}
			}
			custom_effect_tooltip = tooltip_white_line
			add_mio_funds = 700
		}
	}

	trait = {
		token = ford_upgrade_3_1
		name = ford_upgrade_3_1
		icon = GFX_icon_browning_MIO

		available = {
			browning_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Browning_not_merged_yet
				browning_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 0 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			browning_merge_levels_and_funds = yes
			custom_effect_tooltip = browning_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Browning_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_browning_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_2
		name = ford_upgrade_3_2
		icon = GFX_icon_colt_MIO

		available = {
			colt_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Colt_not_merged_yet
				colt_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 1 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			colt_merge_levels_and_funds = yes
			custom_effect_tooltip = colt_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Colt_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_colt_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_3
		name = ford_upgrade_3_3
		icon = GFX_icon_remington_MIO

		available = {
			remington_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Remington_not_merged_yet
				remington_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 2 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			remington_merge_levels_and_funds = yes
			custom_effect_tooltip = remington_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Remington_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_remington_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_4
		name = ford_upgrade_3_4
		icon = GFX_icon_springfield_armory_MIO

		available = {
			springfield_armory_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Springfield_armory_not_merged_yet
				springfield_armory_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 3 y = 4 }

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			breakthrough = 0.03
			defense = 0.03
			reliability = 0.03
			maximum_speed = 0.03
			ap_attack = 0.03
		}

		on_complete = {
			springfield_armory_merge_levels_and_funds = yes
			custom_effect_tooltip = springfield_armory_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Springfield_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_springfield_armory_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_5
		name = ford_upgrade_3_5
		icon = GFX_icon_winchester_repeating_arms_MIO

		available = {
			winchester_repeating_arms_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Winchester_repeating_arms_not_merged_yet
				winchester_repeating_arms_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 4 y = 4 }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			winchester_repeating_arms_merge_levels_and_funds = yes
			custom_effect_tooltip = winchester_repeating_arms_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Winchester_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_winchester_repeating_arms_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_6
		name = ford_upgrade_3_6
		icon = GFX_icon_army_ordnance_department_MIO

		available = {
			army_ordnance_department_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Army_ordnance_department_not_merged_yet
				army_ordnance_department_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 5 y = 4 }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			army_ordnance_department_merge_levels_and_funds = yes
			custom_effect_tooltip = army_ordnance_department_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_AOD_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_army_ordnance_department_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_7
		name = ford_upgrade_3_7
		icon = GFX_icon_rock_island_arsenal_MIO

		available = {
			rock_island_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Rock_island_arsenal_not_merged_yet
				rock_island_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 6 y = 4 }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			rock_island_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = rock_island_arsenal_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_RIA_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_rock_island_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_8
		name = ford_upgrade_3_8
		icon = GFX_icon_watervliet_arsenal_MIO

		available = {
			watervliet_arsenal_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Watervliet_arsenal_not_merged_yet
				watervliet_arsenal_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 7 y = 4 }

		equipment_bonus = {
			defense = 0.1
		}

		on_complete = {
			watervliet_arsenal_merge_levels_and_funds = yes
			custom_effect_tooltip = watervliet_arsenal_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Watervliet_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_watervliet_arsenal_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}

	trait = {
		token = ford_upgrade_3_9
		name = ford_upgrade_3_9
		icon = GFX_icon_studebaker_MIO

		available = {
			studebaker_available = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			custom_override_tooltip = {
				tooltip = USA_MIO_Ford_not_merged_yet
				NOT = { has_mio_flag = USA_MIO_merge_once }
			}
			custom_override_tooltip = {
				tooltip = USA_MIO_Studebaker_not_merged_yet
				studebaker_merged = no #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
			}
			has_global_flag = USA_civil_war_begun_flag
		}

		position = { x = 8 y = 4 }

		equipment_bonus = {
			breakthrough = 0.1
		}

		on_complete = {
			studebaker_merge_levels_and_funds = yes
			custom_effect_tooltip = studebaker_become_unavailable_tt
			custom_effect_tooltip = tooltip_white_line
			set_mio_name_key = USA_MIO_Merger_Studebaker_Ford
			set_mio_flag = USA_MIO_merge_once
			USA_studebaker_merge_flag = yes #Will cause an error if include in the MIO scope/file so scripted trigger fixes this
		}
	}
}
