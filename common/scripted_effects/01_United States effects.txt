USA_decrease_economic_depression = {
	if = {
		limit = { has_idea = USA_civil_war_depression_idea_2 }
		remove_ideas = USA_civil_war_depression_idea_2
	}
	else_if = {
		limit = { has_idea = USA_civil_war_depression_idea }
		swap_ideas = {
			remove_idea = USA_civil_war_depression_idea
			add_idea = USA_civil_war_depression_idea_2
		}
	}
	else_if = {
		limit = { NOT = { has_global_flag = USA_civil_war_over_flag } }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = USA_civil_war_depression_idea
				add_idea = USA_civil_war_depression_idea_2
			}
		}
	}
}
##### Depression spirit
USA_increase_great_depression = {
	if = {
		limit = { has_idea = USA_great_depression }
		swap_ideas = {
			remove_idea = USA_great_depression
			add_idea = USA_black_monday_1
		}
	}
	else_if = {
		limit = { has_idea = USA_black_monday_1 }
		swap_ideas = {
			remove_idea = USA_black_monday_1
			add_idea = USA_black_monday_2
		}
	}
	else_if = {
		limit = { has_idea = USA_black_monday_2 }
		swap_ideas = {
			remove_idea = USA_black_monday_2
			add_idea = USA_black_monday_3
		}
	}
	else_if = {
		limit = { has_idea = USA_black_monday_3 }
		swap_ideas = {
			remove_idea = USA_black_monday_3
			add_idea = USA_black_monday_4
		}
	}
	else = {
		swap_ideas = {
			remove_idea = USA_black_monday_4
			add_idea = USA_black_monday_5
		}
	}
}

USA_decrease_great_depression = {
	if = {
		limit = { has_idea = USA_black_monday_5 }
		swap_ideas = {
			remove_idea = USA_black_monday_5
			add_idea = USA_black_monday_4
		}
	}
	else_if = {
		limit = { has_idea = USA_black_monday_4 }
		swap_ideas = {
			remove_idea = USA_black_monday_4
			add_idea = USA_black_monday_3
		}
	}
	else_if = {
		limit = { has_idea = USA_black_monday_3 }
		swap_ideas = {
			remove_idea = USA_black_monday_3
			add_idea = USA_black_monday_2
		}
	}
	else_if = {
		limit = { has_idea = USA_black_monday_2 }
		swap_ideas = {
			remove_idea = USA_black_monday_2
			add_idea = USA_black_monday_1
		}
	}
}

USA_remove_great_depression = {
	if = {
		limit = { has_idea = USA_great_depression }
		remove_ideas = USA_great_depression
	}
	else_if = {
		limit = { has_idea = USA_black_monday_1 }
		remove_ideas = USA_black_monday_1
	}
	else_if = {
		limit = { has_idea = USA_black_monday_2 }
		remove_ideas = USA_black_monday_2
	}
	else_if = {
		limit = { has_idea = USA_black_monday_3 }
		remove_ideas = USA_black_monday_3
	}
	else_if = {
		limit = { has_idea = USA_black_monday_4 }
		remove_ideas = USA_black_monday_4
	}
	else_if = {
		limit = { has_idea = USA_black_monday_5 }
		remove_ideas = USA_black_monday_5
	}
	else = {
		effect_tooltip = { remove_ideas = USA_black_monday_5 }
	}
}

#### Strike Spirit
USA_increase_strike_wave = {
	if = {
		limit = { has_idea = USA_strike_season_6 }
		swap_ideas = {
			remove_idea = USA_strike_season_6
			add_idea = USA_strike_season_7
		}
	}
	else_if = {
		limit = { has_idea = USA_strike_season_5 }
		swap_ideas = {
			remove_idea = USA_strike_season_5
			add_idea = USA_strike_season_6
		}
	}
	else_if = {
		limit = { has_idea = USA_strike_season_4 }
		swap_ideas = {
			remove_idea = USA_strike_season_4
			add_idea = USA_strike_season_5
		}
	}
	else_if = {
		limit = { has_idea = USA_strike_season_3 }
		swap_ideas = {
			remove_idea = USA_strike_season_3
			add_idea = USA_strike_season_4
		}
	}
	else_if = {
		limit = { has_idea = USA_strike_season_2 }
		swap_ideas = {
			remove_idea = USA_strike_season_2
			add_idea = USA_strike_season_3
		}
	}
	else = {
		swap_ideas = {
			remove_idea = USA_strike_season_1
			add_idea = USA_strike_season_2
		}
	}
}
USA_remove_strike_wave = {
	if = {
		limit = { has_idea = USA_strike_season_1 }
		remove_ideas = USA_strike_season_1
	}
	else_if = {
		limit = { has_idea = USA_strike_season_2 }
		remove_ideas = USA_strike_season_2
	}
	else_if = {
		limit = { has_idea = USA_strike_season_3 }
		remove_ideas = USA_strike_season_3
	}
	else_if = {
		limit = { has_idea = USA_strike_season_4 }
		remove_ideas = USA_strike_season_4
	}
	else_if = {
		limit = { has_idea = USA_strike_season_5 }
		remove_ideas = USA_strike_season_5
	}
	else_if = {
		limit = { has_idea = USA_strike_season_6 }
		remove_ideas = USA_strike_season_6
	}
	else_if = {
		limit = { has_idea = USA_strike_season_7 }
		remove_ideas = USA_strike_season_7
	}
	else = {
		effect_tooltip = { remove_ideas = USA_strike_season_7 }
	}
}

#### Crisis Spirit
USA_increase_political_crisis = {
	if = {
		limit = { has_idea = USA_a_house_divided_3 }
		swap_ideas = {
			remove_idea = USA_a_house_divided_3
			add_idea = USA_a_house_divided_4
		}
	}
	else_if = {
		limit = { has_idea = USA_a_house_divided_2 }
		swap_ideas = {
			remove_idea = USA_a_house_divided_2
			add_idea = USA_a_house_divided_3
		}
	}
	else_if = {
		limit = { has_idea = USA_a_house_divided_1 }
		swap_ideas = {
			remove_idea = USA_a_house_divided_1
			add_idea = USA_a_house_divided_2
		}
	}
	else = {
		add_ideas = USA_a_house_divided_1
	}
}
USA_remove_political_crisis = {
	if = {
		limit = { has_idea = USA_a_house_divided_4 }
		remove_ideas = USA_a_house_divided_4
	}
	else_if = {
		limit = { has_idea = USA_a_house_divided_3 }
		remove_ideas = USA_a_house_divided_3
	}
	else_if = {
		limit = { has_idea = USA_a_house_divided_2 }
		remove_ideas = USA_a_house_divided_2
	}
	else_if = {
		limit = { has_idea = USA_a_house_divided_1 }
		remove_ideas = USA_a_house_divided_1
	}
	else = {
		effect_tooltip = { remove_ideas = USA_a_house_divided_1 }
	}
}

USA_increase_recovery = {
	custom_effect_tooltip = tooltip_white_line
	if = {
		limit = { has_idea = USA_civil_war_aftermath_idea }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea
			add_idea = USA_civil_war_aftermath_idea2
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea2 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea2
			add_idea = USA_civil_war_aftermath_idea3
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea3 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea3
			add_idea = USA_civil_war_aftermath_idea4
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea4 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea4
			add_idea = USA_civil_war_aftermath_idea5
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea5 }
		remove_ideas = USA_civil_war_aftermath_idea5
	}
	else_if = {
		limit = { NOT = { has_global_flag = USA_civil_war_over_flag } }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = USA_civil_war_aftermath_idea
				add_idea = USA_civil_war_aftermath_idea2
			}
		}
	}
}

APG_increase_recovery = {
	if = {
		limit = { has_idea = APG_national_recovery_idea1 }
		swap_ideas = {
			remove_idea = APG_national_recovery_idea1
			add_idea = APG_national_recovery_idea2
		}
	}
	else_if = {
		limit = { has_idea = APG_national_recovery_idea2 }
		swap_ideas = {
			remove_idea = APG_national_recovery_idea2
			add_idea = APG_national_recovery_idea3
		}
	}
	else_if = {
		limit = { has_idea = APG_national_recovery_idea3 }
		swap_ideas = {
			remove_idea = APG_national_recovery_idea3
			add_idea = APG_national_recovery_idea4
		}
	}
	else_if = {
		limit = { has_idea = APG_national_recovery_idea4 }
		swap_ideas = {
			remove_idea = APG_national_recovery_idea4
			add_idea = APG_national_recovery_idea5
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = APG_national_recovery_idea1
				add_idea = APG_national_recovery_idea2
			}
		}
	}
}

APG_increase_military_complex = {
	if = {
		limit = { has_idea = APG_military_industrial_complex_idea1 }
		swap_ideas = {
			remove_idea = APG_military_industrial_complex_idea1
			add_idea = APG_military_industrial_complex_idea2
		}
	}
	else_if = {
		limit = { has_idea = APG_military_industrial_complex_idea2 }
		swap_ideas = {
			remove_idea = APG_military_industrial_complex_idea2
			add_idea = APG_military_industrial_complex_idea3
		}
	}
	else_if = {
		limit = { has_idea = APG_military_industrial_complex_idea3 }
		swap_ideas = {
			remove_idea = APG_military_industrial_complex_idea3
			add_idea = APG_military_industrial_complex_idea4
		}
	}
	else_if = {
		limit = { has_idea = APG_military_industrial_complex_idea4 }
		swap_ideas = {
			remove_idea = APG_military_industrial_complex_idea4
			add_idea = APG_military_industrial_complex_idea5
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = APG_military_industrial_complex_idea1
				add_idea = APG_military_industrial_complex_idea2
			}
		}
	}
}

WCA_increase_recovery = {
	if = {
		limit = { has_idea = USA_civil_war_aftermath_idea }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea
			add_idea = USA_civil_war_aftermath_idea2
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea2 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea2
			add_idea = USA_civil_war_aftermath_idea3
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea3 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea3
			add_idea = USA_civil_war_aftermath_idea4
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea4 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea4
			add_idea = USA_civil_war_aftermath_idea5
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_war_aftermath_idea5 }
		swap_ideas = {
			remove_idea = USA_civil_war_aftermath_idea5
			add_idea = WCA_social_revolution1
		}
		remove_ideas = USA_civil_reconstruction_idea
	}
	else_if = {
		limit = { has_idea = WCA_social_revolution1 }
		swap_ideas = {
			remove_idea = WCA_social_revolution1
			add_idea = WCA_social_revolution2
		}
	}
	else_if = {
		limit = { has_idea = WCA_social_revolution2 }
		swap_ideas = {
			remove_idea = WCA_social_revolution2
			add_idea = WCA_social_revolution3
		}
	}
	else_if = {
		limit = { has_idea = WCA_social_revolution3 }
		swap_ideas = {
			remove_idea = WCA_social_revolution3
			add_idea = WCA_social_revolution4
		}
	}
	else_if = {
		limit = { has_idea = WCA_social_revolution4 }
		swap_ideas = {
			remove_idea = WCA_social_revolution4
			add_idea = WCA_social_revolution5
		}
	}
	else_if = {
		limit = { has_idea = WCA_social_revolution5 }
		swap_ideas = {
			remove_idea = WCA_social_revolution5
			add_idea = WCA_social_revolution6
		}
	}
	else_if = {
		limit = { has_idea = WCA_social_revolution6 }
		swap_ideas = {
			remove_idea = WCA_social_revolution6
			add_idea = WCA_social_revolution7
		}
	}
	else_if = {
		limit = { NOT = { has_global_flag = USA_civil_war_over_flag } }
		effect_tooltip = {
			swap_ideas = {
				remove_idea = USA_civil_war_aftermath_idea
				add_idea = USA_civil_war_aftermath_idea2
			}
		}
	}
}

WCA_increase_market_socialism = {
	if = {
		limit = { has_idea = WCA_central_planning_idea1 }
		swap_ideas = {
			remove_idea = WCA_central_planning_idea1
			add_idea = WCA_central_planning_idea2
		}
	}
	else_if = {
		limit = { has_idea = WCA_central_planning_idea2 }
		swap_ideas = {
			remove_idea = WCA_central_planning_idea2
			add_idea = WCA_central_planning_idea3
		}
	}
	else_if = {
		limit = { has_idea = WCA_central_planning_idea3 }
		swap_ideas = {
			remove_idea = WCA_central_planning_idea3
			add_idea = WCA_central_planning_idea4
		}
	}
	else_if = {
		limit = { has_idea = WCA_central_planning_idea4 }
		swap_ideas = {
			remove_idea = WCA_central_planning_idea4
			add_idea = WCA_central_planning_idea5
		}
	}
	else_if = {
		limit = { has_idea = WCA_central_planning_idea5 }
		swap_ideas = {
			remove_idea = WCA_central_planning_idea5
			add_idea = WCA_central_planning_idea6
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = WCA_central_planning_idea1
				add_idea = WCA_central_planning_idea2
			}
		}
	}
}

WCA_increase_syndicalist_economics = {
	if = {
		limit = { has_idea = WCA_syndicalist_economics1 }
		swap_ideas = {
			remove_idea = WCA_syndicalist_economics1
			add_idea = WCA_syndicalist_economics2
		}
	}
	else_if = {
		limit = { has_idea = WCA_syndicalist_economics2 }
		swap_ideas = {
			remove_idea = WCA_syndicalist_economics2
			add_idea = WCA_syndicalist_economics3
		}
	}
	else_if = {
		limit = { has_idea = WCA_syndicalist_economics3 }
		swap_ideas = {
			remove_idea = WCA_syndicalist_economics3
			add_idea = WCA_syndicalist_economics4
		}
	}
	else_if = {
		limit = { has_idea = WCA_syndicalist_economics4 }
		swap_ideas = {
			remove_idea = WCA_syndicalist_economics4
			add_idea = WCA_syndicalist_economics5
		}
	}
	else_if = {
		limit = { has_idea = WCA_syndicalist_economics5 }
		swap_ideas = {
			remove_idea = WCA_syndicalist_economics5
			add_idea = WCA_syndicalist_economics6
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = WCA_syndicalist_economics1
				add_idea = WCA_syndicalist_economics2
			}
		}
	}
}

WCA_increase_foster_economic_policy = {
	if = {
		limit = { has_idea = WCA_foster_economic_policy_idea1 }
		swap_ideas = {
			remove_idea = WCA_foster_economic_policy_idea1
			add_idea = WCA_foster_economic_policy_idea2
		}
	}
	else_if = {
		limit = { has_idea = WCA_foster_economic_policy_idea2 }
		swap_ideas = {
			remove_idea = WCA_foster_economic_policy_idea2
			add_idea = WCA_foster_economic_policy_idea3
		}
	}
	else_if = {
		limit = { has_idea = WCA_foster_economic_policy_idea3 }
		swap_ideas = {
			remove_idea = WCA_foster_economic_policy_idea3
			add_idea = WCA_foster_economic_policy_idea4
		}
	}
	else_if = {
		limit = { has_idea = WCA_foster_economic_policy_idea4 }
		swap_ideas = {
			remove_idea = WCA_foster_economic_policy_idea4
			add_idea = WCA_foster_economic_policy_idea5
		}
	}
	else_if = {
		limit = { has_idea = WCA_foster_economic_policy_idea5 }
		swap_ideas = {
			remove_idea = WCA_foster_economic_policy_idea5
			add_idea = WCA_foster_economic_policy_idea6
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = WCA_foster_economic_policy_idea1
				add_idea = WCA_foster_economic_policy_idea2
			}
		}
	}
}

WCA_increase_browders_economic_policy = {
	if = {
		limit = { has_idea = WCA_browders_economic_policy_idea1 }
		swap_ideas = {
			remove_idea = WCA_browders_economic_policy_idea1
			add_idea = WCA_browders_economic_policy_idea2
		}
	}
	else_if = {
		limit = { has_idea = WCA_browders_economic_policy_idea2 }
		swap_ideas = {
			remove_idea = WCA_browders_economic_policy_idea2
			add_idea = WCA_browders_economic_policy_idea3
		}
	}
	else_if = {
		limit = { has_idea = WCA_browders_economic_policy_idea3 }
		swap_ideas = {
			remove_idea = WCA_browders_economic_policy_idea3
			add_idea = WCA_browders_economic_policy_idea4
		}
	}
	else_if = {
		limit = { has_idea = WCA_browders_economic_policy_idea4 }
		swap_ideas = {
			remove_idea = WCA_browders_economic_policy_idea4
			add_idea = WCA_browders_economic_policy_idea5
		}
	}
	else_if = {
		limit = { has_idea = WCA_browders_economic_policy_idea5 }
		swap_ideas = {
			remove_idea = WCA_browders_economic_policy_idea5
			add_idea = WCA_browders_economic_policy_idea6
		}
	}
	else = {
		effect_tooltip = {
			swap_ideas = {
				remove_idea = WCA_browders_economic_policy_idea1
				add_idea = WCA_browders_economic_policy_idea2
			}
		}
	}
}

USA_increase_Long_state_support = {
	custom_effect_tooltip = USA_increase_Long_state_support
	hidden_effect = {
		if = {
			limit = {
				NOT = {
					has_dynamic_modifier = { modifier = Long_state_support_low }
					has_dynamic_modifier = { modifier = Long_state_support_even }
					has_dynamic_modifier = { modifier = Long_state_support_high }
					has_dynamic_modifier = { modifier = Long_state_support_guaranteed }
				}
			}
			add_dynamic_modifier = { modifier = Long_state_support_low }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_low }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_low }
			add_dynamic_modifier = { modifier = Long_state_support_even }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_even }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_even }
			add_dynamic_modifier = { modifier = Long_state_support_high }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_high }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_high }
			add_dynamic_modifier = { modifier = Long_state_support_guaranteed }
		}
	}
}

USA_decrease_Long_state_support = {
	custom_effect_tooltip = USA_decrease_Long_state_support
	hidden_effect = {
		if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_guaranteed }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_guaranteed }
			add_dynamic_modifier = { modifier = Long_state_support_high }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_high }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_high }
			add_dynamic_modifier = { modifier = Long_state_support_even }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_even }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_even }
			add_dynamic_modifier = { modifier = Long_state_support_low }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = Long_state_support_low }
			}
			remove_dynamic_modifier = { modifier = Long_state_support_low }
		}
	}
}

USA_increase_SPA_state_support = {
	custom_effect_tooltip = USA_increase_SPA_state_support
	hidden_effect = {
		if = {
			limit = {
				NOT = {
					has_dynamic_modifier = { modifier = SPA_state_support_low }
					has_dynamic_modifier = { modifier = SPA_state_support_even }
					has_dynamic_modifier = { modifier = SPA_state_support_high }
					has_dynamic_modifier = { modifier = SPA_state_support_guaranteed }
				}
			}
			add_dynamic_modifier = { modifier = SPA_state_support_low }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_low }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_low }
			add_dynamic_modifier = { modifier = SPA_state_support_even }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_even }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_even }
			add_dynamic_modifier = { modifier = SPA_state_support_high }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_high }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_high }
			add_dynamic_modifier = { modifier = SPA_state_support_guaranteed }
		}
	}
}

USA_decrease_SPA_state_support = {
	custom_effect_tooltip = USA_decrease_SPA_state_support
	hidden_effect = {
		if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_guaranteed }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_guaranteed }
			add_dynamic_modifier = { modifier = SPA_state_support_high }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_high }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_high }
			add_dynamic_modifier = { modifier = SPA_state_support_even }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_even }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_even }
			add_dynamic_modifier = { modifier = SPA_state_support_low }
		}
		else_if = {
			limit = {
				has_dynamic_modifier = { modifier = SPA_state_support_low }
			}
			remove_dynamic_modifier = { modifier = SPA_state_support_low }
		}
	}
}

USA_remove_support_modifiers_from_state = {
	if = {
		limit = { has_dynamic_modifier = { modifier = SPA_state_support_low } }
		remove_dynamic_modifier = { modifier = SPA_state_support_low }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = SPA_state_support_even } }
		remove_dynamic_modifier = { modifier = SPA_state_support_even }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = SPA_state_support_high } }
		remove_dynamic_modifier = { modifier = SPA_state_support_high }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = SPA_state_support_guaranteed } }
		remove_dynamic_modifier = { modifier = SPA_state_support_guaranteed }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = Long_state_support_low } }
		remove_dynamic_modifier = { modifier = Long_state_support_low }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = Long_state_support_even } }
		remove_dynamic_modifier = { modifier = Long_state_support_even }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = Long_state_support_high } }
		remove_dynamic_modifier = { modifier = Long_state_support_high }
	}
	else_if = {
		limit = { has_dynamic_modifier = { modifier = Long_state_support_guaranteed } }
		remove_dynamic_modifier = { modifier = Long_state_support_guaranteed }
	}
}

USA_disable_SPA_modifiers = {
	every_owned_state = {
		if = {
			limit = { has_dynamic_modifier = { modifier = SPA_state_support_low } }
			remove_dynamic_modifier = { modifier = SPA_state_support_low }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = SPA_state_support_even } }
			remove_dynamic_modifier = { modifier = SPA_state_support_even }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = SPA_state_support_high } }
			remove_dynamic_modifier = { modifier = SPA_state_support_high }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = SPA_state_support_guaranteed } }
			remove_dynamic_modifier = { modifier = SPA_state_support_guaranteed }
		}
	}
}

USA_disable_Long_modifiers = {
	every_owned_state = {
		if = {
			limit = { has_dynamic_modifier = { modifier = Long_state_support_low } }
			remove_dynamic_modifier = { modifier = Long_state_support_low }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = Long_state_support_even } }
			remove_dynamic_modifier = { modifier = Long_state_support_even }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = Long_state_support_high } }
			remove_dynamic_modifier = { modifier = Long_state_support_high }
		}
		else_if = {
			limit = { has_dynamic_modifier = { modifier = Long_state_support_guaranteed } }
			remove_dynamic_modifier = { modifier = Long_state_support_guaranteed }
		}
	}
}

USA_add_star_to_flag = {
	if = {
		limit = { has_cosmetic_tag = america_blue }
		set_cosmetic_tag = america_49_blue
	}
	else_if = {
		limit = { has_cosmetic_tag = america_49 }
		set_cosmetic_tag = america_50
	}
	else_if = {
		limit = { has_cosmetic_tag = america_49_blue }
		set_cosmetic_tag = america_50_blue
	}
	else_if = {
		limit = { has_cosmetic_tag = america_50 }
		set_cosmetic_tag = america_51
	}
	else_if = {
		limit = { has_cosmetic_tag = america_50_blue }
		set_cosmetic_tag = america_51_blue
	}
	else_if = {
		limit = { has_cosmetic_tag = america }
		set_cosmetic_tag = america_49
	}
}

USA_swap_to_blue_cosmetic_tag = {
	if = {
		limit = { has_cosmetic_tag = america_49 }
		set_cosmetic_tag = america_49_blue
	}
	else_if = {
		limit = { has_cosmetic_tag = america_50 }
		set_cosmetic_tag = america_50_blue
	}
	else_if = {
		limit = { has_cosmetic_tag = america_51 }
		set_cosmetic_tag = america_51_blue
	}
	else_if = {
		limit = { NOT = { has_cosmetic_tag = america_blue } }
		set_cosmetic_tag = america_blue
	}
}

USA_swap_to_colourless_cosmetic_tag = {
	if = {
		limit = { has_cosmetic_tag = america_49_blue }
		set_cosmetic_tag = america_49
	}
	else_if = {
		limit = { has_cosmetic_tag = america_50_blue }
		set_cosmetic_tag = america_50
	}
	else_if = {
		limit = { has_cosmetic_tag = america_51_blue }
		set_cosmetic_tag = america_51
	}
	else_if = {
		limit = { NOT = { has_cosmetic_tag = america } }
		set_cosmetic_tag = america
	}
}

USA_add_to_league_of_american_states = {
	if = {
		limit = { NOT = { is_in_array = { USA.USA_loas_members = THIS } } }
		add_to_array = { USA.USA_loas_members = THIS }
		if = {
			limit = {
				NOT = {
					tag = CAN
					is_in_array = { USA.USA_loas_development_array = THIS }
				}
			}
			add_to_array = { USA.USA_loas_development_array = THIS }
		}
		hidden_effect = {
			USA = { country_event = { id = ustates.255 days = 3 } }
		}
	}
}

USA_remove_from_league_of_american_states = {
	if = {
		limit = { is_in_array = { USA.USA_loas_members = THIS } }
		remove_from_array = { USA.USA_loas_members = THIS }
		if = {
			limit = { is_in_array = { USA.USA_loas_development_array = THIS } }
			remove_from_array = { USA.USA_loas_development_array = THIS }
		}
		remove_opinion_modifier = {
			target = USA
			modifier = USA_joined_league
		}
		hidden_effect = {
			remove_opinion_modifier = {
				target = USA
				modifier = KR_close_allies
			}
		}
		USA = {
			remove_targeted_decision = { decision = USA_install_league_puppet target = PREV }
			remove_opinion_modifier = {
				target = PREV
				modifier = USA_joined_league
			}
			if = {
				limit = { has_non_aggression_pact_with = PREV }
				diplomatic_relation = {
					country = PREV
					relation = non_aggression_pact
					active = no
				}
			}
			if = {
				limit = { has_guaranteed = PREV }
				diplomatic_relation = {
					country = PREV
					relation = guarantee
					active = no
				}
			}
			if = {
				limit = { has_military_access_to = PREV }
				diplomatic_relation = {
					country = PREV
					relation = military_access
					active = no
				}
			}
			hidden_effect = {
				add_ai_strategy = {
					type = send_volunteers_desire
					id = PREV
					value = -200
				}
				add_ai_strategy = {
					type = support
					id = PREV
					value = -200
				}
				add_ai_strategy = {
					type = befriend
					id = PREV
					value = -200
				}
				add_ai_strategy = {
					type = protect
					id = PREV
					value = -200
				}
				country_event = { id = ustates.255 days = 3 }
			}
		}
	}
}

USA_republicans_elected_effect = {
	if = {
		limit = { has_government = market_liberal }
		add_popularity = {
			ideology = market_liberal
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = market_liberal
			popularity = 0.20
		}
		set_politics = {
			ruling_party = market_liberal
			elections_allowed = yes
		}
	}
}

USA_progressive_democrats_elected_effect = {
	if = {
		limit = { has_government = social_liberal }
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = 0.15
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		set_politics = {
			ruling_party = social_liberal
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_conservative }
		add_to_coalition = yes
		if = {
			limit = {
				has_country_flag = USA_borah_democrats_reunited
			}
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
		}
	}
}

USA_conservative_democrats_elected_effect = {
	if = {
		limit = { has_government = social_conservative }
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = 0.15
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		if = {
			limit = {
				has_country_flag = USA_borah_democrats_reunited
			}
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			add_to_coalition = yes
		}
	}
}

USA_longist_democrats_elected_effect = {
	if = {
		limit = { has_government = authoritarian_democrat }
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.15
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = yes
		}
		set_temp_variable = { coalition_partner_var = token:social_liberal }
		add_to_coalition = yes
		set_temp_variable = { coalition_partner_var = token:social_conservative }
		add_to_coalition = yes
	}
}

ACC_farmer_labor_elected_effect = {
	if = {
		limit = { has_government = social_democrat }
		add_popularity = {
			ideology = social_democrat
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_democrat
			popularity = 0.2
		}
		set_politics = {
			ruling_party = social_democrat
			elections_allowed = yes
		}
	}
}

WCA_syndicalists_elected_effect = {
	if = {
		limit = { has_government = syndicalist }
		add_popularity = {
			ideology = syndicalist
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = syndicalist
			popularity = 0.2
		}
	}
	effect_tooltip = {
		set_politics = {
			ruling_party = syndicalist
			elections_allowed = yes
			election_frequency = 48
		}
	}
	hidden_effect = {
		random_list = {
			seed = global.date
			25 = {
				set_politics = {
					ruling_party = syndicalist
					elections_allowed = yes
					election_frequency = 47
				}
			}
			25 = {
				set_politics = {
					ruling_party = syndicalist
					elections_allowed = yes
					election_frequency = 46
				}
			}
			25 = {
				set_politics = {
					ruling_party = syndicalist
					elections_allowed = yes
					election_frequency = 44
				}
			}
			25 = {
				set_politics = {
					ruling_party = syndicalist
					elections_allowed = yes
					election_frequency = 38
				}
			}
		}
	}
}

WCA_radical_socialists_elected_effect = {
	if = {
		limit = { has_government = radical_socialist }
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.2
		}
	}
	effect_tooltip = {
		set_politics = {
			ruling_party = radical_socialist
			elections_allowed = yes
			election_frequency = 48
		}
	}
	hidden_effect = {
		random_list = {
			seed = global.date
			25 = {
				set_politics = {
					ruling_party = radical_socialist
					elections_allowed = yes
					election_frequency = 47
				}
			}
			25 = {
				set_politics = {
					ruling_party = radical_socialist
					elections_allowed = yes
					election_frequency = 46
				}
			}
			25 = {
				set_politics = {
					ruling_party = radical_socialist
					elections_allowed = yes
					election_frequency = 44
				}
			}
			25 = {
				set_politics = {
					ruling_party = radical_socialist
					elections_allowed = yes
					election_frequency = 38
				}
			}
		}
	}
}

USA_emergency_recruitment_fix = {
	if = {
		limit = { #Mac Warplan Yorktown
			tag = USA
			has_country_flag = USA_Warplan_Yorktown
			num_divisions < 28
		}
		359 = { ACW_spawn_militia_divisions = yes } #New Jersey
		361 = { ACW_spawn_militia_divisions = yes } #D.C.
		362 = { ACW_spawn_militia_divisions = yes } #Virginia
	}
	if = {
		limit = { #Mac Warplan San Jacinto
			tag = USA
			has_country_flag = USA_Warplan_SanJacinto
			num_divisions < 39
		}
		373 = { ACW_spawn_militia_divisions = yes } #Missouri
		375 = { ACW_spawn_militia_divisions = yes } #Northern Texas
		833 = { ACW_spawn_militia_divisions = yes } #Southern Texas
	}
	if = {
		limit = { #USA No Warplan
			tag = USA
			NOT = {
				has_country_flag = USA_Warplan_Yorktown
				has_country_flag = USA_Warplan_SanJacinto
			}
			num_divisions < 39
		}
		373 = { ACW_spawn_militia_divisions = yes } #Missouri
		361 = { ACW_spawn_militia_divisions = yes } #D.C.
		362 = { ACW_spawn_militia_divisions = yes } #Virginia
	}
	if = {
		limit = { #ACC
			tag = ACC
			num_divisions < 14
		}
		378 = { ACW_spawn_militia_divisions = yes } #Northern California
		829 = { ACW_spawn_militia_divisions = yes } #Southern California
		798 = { ACW_spawn_militia_divisions = yes } #Los Angeles
	}
	if = {
		limit = { #APG
			tag = APG
			num_divisions < 11
		}
		if = {
			limit = { USA = { has_country_flag = USA_Warplan_SanJacinto } }
			367 = { ACW_spawn_militia_divisions = yes } #Alabama
			365 = { ACW_spawn_militia_divisions = yes } #Georgia
			370 = { ACW_spawn_militia_divisions = yes } #Mississippi
		}
		else = {
			375 = { ACW_spawn_militia_divisions = yes } #Northern Texas
			365 = { ACW_spawn_militia_divisions = yes } #Georgia
			371 = { ACW_spawn_militia_divisions = yes } #New Orleans
		}
	}
	if = {
		limit = { #WCA
			tag = WCA
			num_divisions < 7
		}
		395 = { ACW_spawn_militia_divisions = yes } #Illinois
		261 = { ACW_spawn_militia_divisions = yes } #Ohio
	}
}

USA_create_virginia_hall_operative = {
	if = {
		limit = { has_dlc_lar = yes }
		create_operative_leader = {
			name = USA_virginia_hall_goillot
			GFX = GFX_portrait_USA_virginia_hall_goillot_operative
			traits = { operative_demolition_expert }
			bypass_recruitment = no
			available_to_spy_master = yes
			female = yes
			nationalities = { CAN NEE USA WCA APG ACC }
		}
	}
}

USA_borah_negotiations_conclude = {
	if = {
		limit = {
			has_country_flag = USA_borah_negotiation_long_soft_south_hard
		}
		set_variable = { USA_borah_negotiations_long_attack = USA_borah_negotiations_soft_attack }
		set_variable = { USA_borah_negotiations_south_attack = USA_borah_negotiations_hard_attack }
	}
	else = {
		set_variable = { USA_borah_negotiations_long_attack = USA_borah_negotiations_hard_attack }
		set_variable = { USA_borah_negotiations_south_attack = USA_borah_negotiations_soft_attack }
	}

	if = {
		limit = {
			is_ai = yes
			has_game_rule = { rule = USA_CIVIL_WAR option = USA_CIVIL_WAR_TWO_SIDES }
		}
		hidden_effect = {
			random_list = {
				10 = {
					country_event = { id = uscrisis.67 days = 6 }
				}
				45 = {
					country_event = { id = uscrisis.68 days = 6 }
				}
				45 = {
					country_event = { id = uscrisis.69 days = 6 }
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = USA_borah_negotiations_long_endorsed
			NOT = {
				check_variable = { USA_borah_negotiations_south_attack > USA_borah_negotiations_south_defence }
			}
		}
		hidden_effect = {
			country_event = { id = uscrisis.66 days = 3 }
			country_event = { id = uscrisis.70 days = 6 }
		}
	}
	else_if = {
		limit = {
			check_variable = { USA_borah_negotiations_long_attack > USA_borah_negotiations_long_defence }
			check_variable = { USA_borah_negotiations_south_attack > USA_borah_negotiations_south_defence }
		}
		hidden_effect = {
			country_event = { id = uscrisis.67 days = 6 }
		}
	}
	else_if = {
		limit = {
			check_variable = { USA_borah_negotiations_long_attack > USA_borah_negotiations_long_defence }
			NOT = {
				check_variable = { USA_borah_negotiations_south_attack > USA_borah_negotiations_south_defence }
			}
		}
		hidden_effect = {
			country_event = { id = uscrisis.68 days = 6 }
		}
	}
	else_if = {
		limit = {
			NOT = {
				check_variable = { USA_borah_negotiations_long_attack > USA_borah_negotiations_long_defence }
			}
			check_variable = { USA_borah_negotiations_south_attack > USA_borah_negotiations_south_defence }
		}
		hidden_effect = {
			country_event = { id = uscrisis.69 days = 6 }
		}
	}
	else = {
		hidden_effect = {
			country_event = { id = uscrisis.70 days = 6 }
		}
	}
}

USA_longist_transfer_characters = {
	APG = {
		APG_charles_edward_coughlin = { set_nationality = USA }
		APG_lawrence_dennis = { set_nationality = USA }
		APG_henry_ford = { set_nationality = USA }
		APG_archibald_bulloch_roosevelt = { set_nationality = USA }
		APG_fred_chase_koch = { set_nationality = USA }
		APG_hugo_lafayette_black = { set_nationality = USA }
		APG_francis_everett_townsend = { set_nationality = USA }
		APG_elizabeth_eloise_kirkpatrick_dilling = { set_nationality = USA }
		APG_hamilton_stuyvesant_fish = { set_nationality = USA }
		APG_robert_rice_reynolds = { set_nationality = USA }
		APG_jacob_thorkelson = { set_nationality = USA }
		APG_burton_kendall_wheeler = { set_nationality = USA }
		APG_john_lewis = { set_nationality = USA }
		APG_gerald_lyman_kenneth_smith = { set_nationality = USA }
		APG_frank_byron_rowlett = { set_nationality = USA }
	}
}

USA_cancel_share_our_wealth = {
	set_temp_variable = { pp_loss = APG_share_the_wealth_consumer_goods_factor }
	multiply_temp_variable = { pp_loss = -100 }
	clamp_temp_variable = { var = pp_loss max = -1 min = -100 }
	add_political_power = var:pp_loss

	set_temp_variable = { stab_loss = APG_share_the_wealth_consumer_goods_factor }
	multiply_temp_variable = { stab_loss = -1 }
	clamp_temp_variable = { var = stab_loss max = -0.01 min = -1 }
	add_stability = var:stab_loss

	set_temp_variable = { ws_loss = APG_share_the_wealth_consumer_goods_factor }
	multiply_temp_variable = { ws_loss = -0.25 }
	clamp_temp_variable = { var = ws_loss max = -0.01 min = -0.5 }
	add_war_support = var:ws_loss

	multiply_variable = { APG_share_the_wealth_consumer_goods_factor = 0.5 }

	clear_variable = APG_share_the_wealth_stability_weekly
	clear_variable = APG_share_the_wealth_war_support_weekly
	clear_variable = APG_share_the_wealth_global_building_slots_factor
	clear_variable = APG_share_the_wealth_monthly_population
	clear_variable = APG_share_the_wealth_industrial_capacity_factory

	remove_dynamic_modifier = { modifier = APG_share_the_wealth_modifier }
	add_dynamic_modifier = {
		modifier = APG_share_the_wealth_lingering_costs
		days = 730
	}
	force_update_dynamic_modifier = yes
}

WCA_enable_industrial_research_expansion_decision = {
	if = {
		limit = { NOT = { has_country_flag = WCA_industrial_research_expansion_enabled } }
		custom_effect_tooltip = tooltip_white_line
		set_country_flag = WCA_industrial_research_expansion_enabled
		activate_targeted_decision = { decision = WCA_industrial_research_expansion target = ROOT }
	}
	else = {
		effect_tooltip = {
			activate_targeted_decision = { decision = WCA_industrial_research_expansion target = ROOT }
		}
	}
}

WCA_enable_infrastructure_expansion_decisions = {
	custom_effect_tooltip = tooltip_white_line
	if = {
		limit = { NOT = { has_country_flag = WCA_infrastructure_expansion_enabled } }
		set_country_flag = WCA_infrastructure_expansion_enabled
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 261 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 360 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 361 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 362 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 375 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 386 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 392 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 395 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 396 }
		activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 833 }
	}
	else = {
		effect_tooltip = {
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 261 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 360 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 361 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 362 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 375 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 386 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 392 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 395 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 396 }
			activate_targeted_decision = { decision = WCA_infrastructure_expansion target = 833 }
		}
	}
}

WCA_enable_agricultural_investments_decisions = {
	custom_effect_tooltip = tooltip_white_line
	if = {
		limit = { NOT = { has_country_flag = WCA_agricultural_investments_enabled } }
		set_country_flag = WCA_agricultural_investments_enabled
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 357 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 372 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 374 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 382 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 383 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 384 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 385 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 388 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 389 }
		activate_targeted_decision = { decision = WCA_agricultural_investments target = 390 }
	}
	else = {
		effect_tooltip = {
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 357 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 372 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 374 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 382 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 383 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 384 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 385 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 388 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 389 }
			activate_targeted_decision = { decision = WCA_agricultural_investments target = 390 }
		}
	}
}

WCA_enable_industrial_development_decisions = {
	custom_effect_tooltip = tooltip_white_line
	if = {
		limit = { NOT = { has_country_flag = WCA_industrial_development_enabled } }
		set_country_flag = WCA_industrial_development_enabled
		activate_targeted_decision = { decision = WCA_industrial_development target = 362 }
		activate_targeted_decision = { decision = WCA_industrial_development target = 363 }
		activate_targeted_decision = { decision = WCA_industrial_development target = 368 }
		activate_targeted_decision = { decision = WCA_industrial_development target = 371 }
		activate_targeted_decision = { decision = WCA_industrial_development target = 373 }
		activate_targeted_decision = { decision = WCA_industrial_development target = 375 }
	}
	else = {
		effect_tooltip = {
			activate_targeted_decision = { decision = WCA_industrial_development target = 362 }
			activate_targeted_decision = { decision = WCA_industrial_development target = 363 }
			activate_targeted_decision = { decision = WCA_industrial_development target = 368 }
			activate_targeted_decision = { decision = WCA_industrial_development target = 371 }
			activate_targeted_decision = { decision = WCA_industrial_development target = 373 }
			activate_targeted_decision = { decision = WCA_industrial_development target = 375 }
		}
	}
}
